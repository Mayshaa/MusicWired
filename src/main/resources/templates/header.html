<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


	<style>
		marquee{
			height:20px;
			 cursor: Default;
		}
		#rank{
			cursor: Default;
		}
		#rank a{
			color: white;
		}
		.sign__group label{
		    width: 100%;
			height: 50px;
			border-radius: 12px;
			background-color: #0099FF;
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
			color: #fff;
			font-size: 14px;
			position: relative;
			z-index: 2;
			text-transform: uppercase;
			font-family: 'Inter', sans-serif;
			font-weight: 500;
			margin: 15px auto;
			-webkit-transition:background-color 0.5s, -webkit-transform 0.5s;
		}
		
		.sign__group input[type="file"] {
			position: absolute;
			width: 1px;
			height: 1px;
			padding: 0;
			margin: -1px;
			overflow: hidden;
			clip:rect(0,0,0,0);
			border: 0;
		}
		
		.sign__group label:hover {
		    color: #fff;
  			background-color: #222227;
  			cursor: pointer;
		}
	</style>

	<!-- CSS -->
	<link rel="stylesheet" href="css/bootstrap-reboot.min.css">
	<link rel="stylesheet" href="css/bootstrap-grid.min.css">
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/magnific-popup.css">
	<link rel="stylesheet" href="css/select2.min.css">
	<link rel="stylesheet" href="css/paymentfont.min.css">
	<link rel="stylesheet" href="css/slider-radio.css">
	<link rel="stylesheet" href="css/plyr.css">
	<link rel="stylesheet" href="css/main.css">

	<!-- Favicons -->
	<link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32">
	<link rel="apple-touch-icon" href="icon/favicon-32x32.png">

	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="Dmitry Volkov">
	<title>Volna – Record label & Music streaming HTML Template</title>
	
</head>

<body>
	<header class="header">
		<div class="header__content">
			<div class="header__logo">
				<a href="/index">
					<img src="icon/MUSICWIREDLOGO2.png"  alt="">
				</a>
			</div>

			<nav class="header__nav" th:if="${session.login ne null}">

				<a th:href="@{boardWriterView(boWriter=${session.login.mId}, mId=${session.login.mId})}">Profile</a>

			</nav>

			<form action="/search" method="GET" class="header__search" id="aaa">
				<input type="text" name="keyword" id="key" th:value="${keyword}" placeholder="Search" style="width:20vw;">
				<button id="aaaa" type="submit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.71,20.29,18,16.61A9,9,0,1,0,16.61,18l3.68,3.68a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,20.29ZM11,18a7,7,0,1,1,7-7A7,7,0,0,1,11,18Z"/></svg></button>
<!-- 				<button type="button" class="close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
 -->			</form>
 				
 				
 				<span style=" font-weight: nammal; width:auto;  color:white; height:31px;  background:gray; border-radius: 10px 10px 10px 10px; opacity:0.8; margin-left: 2%; font-size: 12px; display: flex; align-items: center; padding-left: 1%; padding-right: 1%;" id="rankArea">인기 키워드</span><div id="rank" style="color:white; background: black; font-style: italic; font-weight: bold; border-radius: 0px 10px 10px 0px; width: 15vw; padding-left: 1%;"></div>
				
				

			<div class="header__actions">
				<div class="header__action header__action--search">
					<button class="header__action-btn" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.71,20.29,18,16.61A9,9,0,1,0,16.61,18l3.68,3.68a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,20.29ZM11,18a7,7,0,1,1,7-7A7,7,0,0,1,11,18Z"/></svg></button>
				</div>

				
				<div class="header__action header__action--cart" th:if="${session.login ne null}">
					<span id="cartCountArea"></span>
					<a class="header__action-btn" href="/cartList"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5,19A1.5,1.5,0,1,0,10,20.5,1.5,1.5,0,0,0,8.5,19ZM19,16H7a1,1,0,0,1,0-2h8.49121A3.0132,3.0132,0,0,0,18.376,11.82422L19.96143,6.2749A1.00009,1.00009,0,0,0,19,5H6.73907A3.00666,3.00666,0,0,0,3.92139,3H3A1,1,0,0,0,3,5h.92139a1.00459,1.00459,0,0,1,.96142.7251l.15552.54474.00024.00506L6.6792,12.01709A3.00006,3.00006,0,0,0,7,18H19a1,1,0,0,0,0-2ZM17.67432,7l-1.2212,4.27441A1.00458,1.00458,0,0,1,15.49121,12H8.75439l-.25494-.89221L7.32642,7ZM16.5,19A1.5,1.5,0,1,0,18,20.5,1.5,1.5,0,0,0,16.5,19Z"/></svg></a>

					<div class="header__drop" id="smallCartListArea">
					</div>
				</div>
				
				<div class="header__action header__action--signin">
					<a th:if="${session.login eq null}" class="header__action-btn open-modal" href="#login">
						<span>로그인</span>
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,12a1,1,0,0,0-1-1H11.41l2.3-2.29a1,1,0,1,0-1.42-1.42l-4,4a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l4,4a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L11.41,13H19A1,1,0,0,0,20,12ZM17,2H7A3,3,0,0,0,4,5V19a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V16a1,1,0,0,0-2,0v3a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V8a1,1,0,0,0,2,0V5A3,3,0,0,0,17,2Z"/></svg>
					</a>
					
					<a th:if="${session.login ne null}" class="header__action-btn" href="/memberLogout">
						<span>로그아웃</span>
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,12a1,1,0,0,0-1-1H11.41l2.3-2.29a1,1,0,1,0-1.42-1.42l-4,4a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l4,4a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L11.41,13H19A1,1,0,0,0,20,12ZM17,2H7A3,3,0,0,0,4,5V19a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V16a1,1,0,0,0-2,0v3a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V8a1,1,0,0,0,2,0V5A3,3,0,0,0,17,2Z"/></svg>
					</a>
					
				</div>
				<div class="header__action header__action--signin">
					<a th:if="${session.login eq null}" class="header__action-btn open-modal" href="#join">
						<span>회원가입</span>
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,12a1,1,0,0,0-1-1H11.41l2.3-2.29a1,1,0,1,0-1.42-1.42l-4,4a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l4,4a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L11.41,13H19A1,1,0,0,0,20,12ZM17,2H7A3,3,0,0,0,4,5V19a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V16a1,1,0,0,0-2,0v3a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V8a1,1,0,0,0,2,0V5A3,3,0,0,0,17,2Z"/></svg>
					</a>
				</div>
			</div>

			<button class="header__btn" type="button">
				<span></span>
				<span></span>
				<span></span>
			</button>
		</div>
		<div class="col-12">
					<div class="sign">
						<div class="sign__content">
							<!-- authorization form -->
							<form action="memLogin" method="POST" class="sign__form modal zoom-anim-dialog mfp-hide" id= "login" >
							<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
							
								<a href="/index" class="sign__logo" style="padding-left: 36.5%;">
									<img src="icon/MUSICWIREDLOGO.png"  alt="">
								</a>

								<div class="sign__group">
									<input type="text" class="sign__input" id="user-id" name="mId" placeholder="ID">
								</div>

								<div class="sign__group">
									<input type="password" class="sign__input" id="password" name="mPw" placeholder="Password">
								</div>


								<div class="sign__group sign__group--checkbox">
									<input id="remember" name="remember" type="checkbox" checked="checked">
								
								</div>

								<button class="sign__btn" type="submit">Login</button>
                
								<div style="text-align: center;">
									<span class="sign__text">Don't have an account? <a  class ="open-modal" href="#modal-buy1">Sign up!</a></span><br/>
									<span class="sign__text"><a class ="open-modal" href="#modal-buy2">Forgot ID?</a></span><br/>
									<span class="sign__text"><a class ="open-modal" href="#findpw">Forgot Password?</a></span><br/>
								</div>
	<!-- <input type="hidden" th:value="${error}" id="hidden"></input> -->
							</form>
							
						<form action="memberJoin" method="post" enctype="multipart/form-data" class="sign__form  modal zoom-anim-dialog mfp-hide" id= "modal-buy1">
								<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
							
								<a href="/index" class="sign__logo" style="padding-left: 36.5%;">
									<img src="icon/MUSICWIREDLOGO.png"  alt="">
								</a>

								<div class="sign__group">
									<input type="text" class="sign__input" placeholder="ID" name="mId" id="mId" onkeyup="checkId()" required><br/>
									<span id="confirmId"></span><br/>
								</div>

								<div class="sign__group">
									<input type="password" name="mPw" class="sign__input" placeholder="Password" required maxlength="20">
								</div>
								 
								<div class="sign__group">
									<input type="text" name="mName" class="sign__input" placeholder="Name" required>
								</div>
								
								<div class="sign__group">
									<input type="email" name="mEmail" id="mEmail" class="sign__input" placeholder="Email"  onkeyup="checkEmail()"  required>
								<span id="confirmEmail"></span><br/>
                				</div>
								
								<div class="slider-radio">
									<input name="mGender" id="featured" type="radio" value="남" checked="checked">
									<label for="featured">남</label>
									<input name="mGender" id="popular" type="radio" value="여">
									<label for="popular">여</label>
								</div>
								<div class="sign__group">
									<label for="filebtn">프로필사진</label>
									<input type="file" name="mProfile" id="filebtn">
								</div>
									<button class="sign__btn" type="submit">Sign up</button>
								
								<div style="padding-left: 20px;">
									<span class="sign__text">Already have an account? <a class="open-modal" href="#login">Sign in!</a></span>
								</div>
							</form>

								<div class="sign__form modal zoom-anim-dialog mfp-hide" id= "modal-buy2">
								<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
							
								<a href="/index" class="sign__logo" style="padding-left: 36.5%;">
									<img src="icon/MUSICWIREDLOGO.png"  alt="">
								</a>

								<div class="sign__group">
									<input type="email" name="mEmail" class="sign__input" placeholder="Email" id="idFindText">
								</div>

								<a class="sign__btn open-modal" href="#findid" id="idFindBtn">아이디찾기</a>

								<span class="sign__text">회원가입시 작성했던 이메일을 입력해주세요</span>
							</div>
							
							
								<div class="sign__form  modal zoom-anim-dialog mfp-hide" id= "findid">

									<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
								
									<a href="/index" class="sign__logo" style="padding-left: 36.5%;">
										<img src="icon/MUSICWIREDLOGO.png"  alt="">
									</a>
									<div id="findIdArea">

										<div class="sign__group">
											<input type="text" name="mEmail" class="sign__input" value="아이디 찾기 결과" disabled style="text-align: center; color: #99FFFF;">
										</div>
										<input type="text" id="find" name="mEmail" class="sign__input" th:value="'ID  ➡➡  ' + ${find}" disabled style="text-align: center;">
									</div>
										<a type="button" class="sign__btn open-modal" id="login_button" href="#login">로그인창으로 이동</a>
								</div>
	
							<div class="sign__form modal zoom-anim-dialog mfp-hide" id= "findpw">
								<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
							
								<a href="/index" class="sign__logo" style="padding-left: 36.5%;">
									<img src="icon/MUSICWIREDLOGO.png"  alt="">
								</a>

								<div class="sign__group">
									<input type="text" name=mId class="sign__input" placeholder="ID" id="pwFindText">
								</div>

								<a class="sign__btn open-modal" href="#pw" id="pwFindBtn">비밀번호 찾기</a>

								<span class="sign__text">회원님의 아이디를 입력해주세요</span>
							</div>
							
							<div class="sign__form modal zoom-anim-dialog mfp-hide" id= "pw">
								<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
							
								<a href="/index" class="sign__logo" style="padding-left: 36.5%;">
									<img src="icon/MUSICWIREDLOGO.png"  alt="">
								</a>
								<div id="findPwArea">
								</div>
								<a type="button" class="sign__btn open-modal" id="login_button" href="#login">로그인창으로 이동</a>
							
							</div>

					</div>
				</div>
				</div>
					<div class="col-12">
					<div class="sign">
						<div class="sign__content">
			<form action="memberJoin" method="post" enctype="multipart/form-data" class="sign__form  modal zoom-anim-dialog mfp-hide" id= "join">
								<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
							
								<a href="/index" class="sign__logo" style="padding-left: 36.5%;">
									<img src="icon/MUSICWIREDLOGO.png"  alt="">
								</a>

								<div class="sign__group">
									<input type="text" class="sign__input" placeholder="ID" name="mId" id="mId" onkeyup="checkId()" required><br/>
									<span id="confirmId"></span><br/>
								</div>

								<div class="sign__group">
									<input type="password" name="mPw" class="sign__input" placeholder="Password" required maxlength="20">
								</div>
								 
								<div class="sign__group">
									<input type="text" name="mName" class="sign__input" placeholder="Name" required>
								</div>
								
								<div class="sign__group">
									<input type="email" name="mEmail" id="mEmail" class="sign__input" placeholder="Email"  onkeyup="checkEmail()"  required>
								<span id="confirmEmail"></span><br/>
                				</div>
								
								<div class="slider-radio">
									<input name="mGender" id="featured" type="radio" value="남" checked="checked">
									<label for="featured">남</label>
									<input name="mGender" id="popular" type="radio" value="여">
									<label for="popular">여</label>
								</div>
								<div class="sign__group">
									<label for="filebtn">프로필사진</label>
									<input type="file" name="mProfile" id="filebtn">
								</div>
									<button class="sign__btn" type="submit">Sign up</button>
								
								<div style="text-align: center;">
									<span class="sign__text">Already have an account? <a class="open-modal" href="#login">Sign in!</a></span>
								</div>
							</form>

						</div>
					</div>
				</div>

		
	<script type="text/javascript">
	
		/* if(!$("#hidden").val()==""){
			alert($("#hidden").val());
		}; */

	</script>

	<script th:if="${session.login ne null}" type="text/javascript" th:inline="javascript">
		var CheckLogin = [[${session.login}]]
		
		if(CheckLogin != null){
			var sessionId = [[${session.login.mId}]]
			
			$(document).ready(function(){
				
				$.ajax({
		    		type : "POST",
		    		url :"test",
		    		dataType:"json",
		    		success : function(list){
		    			
		    			test(list);
		    			console.log(list);
		    		},
		    		error : function(){
		    			alert("시르패르");
		    		}
		    	});
		    	

		    	function test(list){
		    		
		    		
		    		var output="";
		    		var output1="";
		    		output+="<marquee style='height:25px;' behavior='scroll' direction='up' scrollamount='1' onmouseover=this.stop() onmouseout=this.start()>";
		    	
		    		var arr = [1,2,3,4,5,6,7,8,9,10];
		    		
		    		for(var i in list){
		    		for(var i in arr){	
		    		output+="<span style='opacity:0.5;'>"+arr[i]+"</span>. <a style='color:#fff;' href='search?keyword="+list[i].keyword+"'>"+list[i].keyword+"</a>"
		    		output+="</br>"
		    			}
		    		break;
		    		}
		    		
		    		output+="</marquee>"
		    		var rank=document.getElementById('rank');
					console.log("실시간"+rank);
					rank.innerHTML=output;
					
					/* var box = document.getElementById('rank');
			    
			    	
			    	box.addEventListener('mouseover',function(){
			    		
			    		
			    	});
					box.addEventListener('mouseout',function(){
			    		

		    	}); */
		  
		    	}
		    					
				$.ajax({
					type : "POST",
					url : "ajaxCartList",
					data : {"caMid" : sessionId},
					dataType : "json",
					success : function(list){
						smallCart(list);
					},
					error : function(){
						console.log("장바구니 개수 출력 실패");
					}
				});
				
				function smallCart(list){
					var cartCountArea = document.getElementById('cartCountArea');
					
					if(list.length <= 0){
						cartCountArea.innerHTML = "";
					} else{
						cartCountArea.innerHTML = list.length;
					}
					
					var output = "";
					
					if(list.length > 4){
						output += "<a href='/cartList' class='header__all'>Go to cart</a>";
						for(var i=0; i<4; i++){
							output += "<div class='header__product'>";
							output += "<img src='muImage/"+list[i].muImage+"' style='width: 50px; height: 50px; border-radius: 70%; overflow: hidden;'>";
							output += "<p><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></p>";
							output += "<span>"+list[i].muSinger+"</span>";
							output += "<button id='"+list[i].muCode+"' class='cartDelete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></div>";
						}
					}else if(list.length == 0){
						output += "<div class='header__product' style='padding-left:33px; padding-right:33px;'>";
						output += "<span>장바구니가 비어있습니다.</span></div>"
					}else{
						output += "<a href='/cartList' class='header__all'>Go to cart</a>";
						for(var i in list){
							output += "<div class='header__product'>";
							output += "<img src='muImage/"+list[i].muImage+"' style='width: 50px; height: 50px; border-radius: 70%; overflow: hidden;'>";
							output += "<p><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></p>";
							output += "<span>"+list[i].muSinger+"</span>";
							output += "<button id='"+list[i].muCode+"' class='cartDelete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></div>";
						}
					}
					
					
					var smallCartListArea = document.getElementById('smallCartListArea');
					smallCartListArea.innerHTML = output;
					
					$(".cartDelete").click(function(){
						
						var muCode = $(this).attr('id');
						console.log("muCode : "+muCode);
						
						$.ajax({
							type : "POST",
							url : "cartListDelete",
							data : {"caMuCode" : muCode,
									"caMid" : sessionId
									},
							dataType : "json",
							success : function(list){
								smallCart(list);
								$("#cartListArea").load(window.location.href + "#cartListArea");
								$("#myMusicListArea").load(window.location.href + "#myMusicListArea");
							},
							error : function(){
								alert('장바구니 삭제 실패');
							}
						});
					});
				}
				function cartList(list){
					var output = "";
					var output1 = "";
					var output2 = "";
					var output3 = "";
					var muprice = $(list).length;
					
					if(muprice <= 0){
						output += "<table class='cart__table'>";
						output += "<tr>";
						output += "<th>장바구니가 비어있습니다.<br/><a href='/allfileList' class='hero__btn hero__btn--green'>음원목록으로</a></th>";
						output += "</tr>";
					} else{
						output += "<table class='cart__table'>";
						output += "<thead>"
						output += "<tr>";
						output += "<th>프로필</th>";
						output += "<th>제목</th>";
						output += "<th>가수</th>";
						output += "<th>좋아요</th>";
						output += "<th>조회수</th>";
						output += "<th>금액</th>";
						output += "<th></th>";
						output += "</tr>";
						output += "</thead>"
					}
					
					for(var i in list){
						output += "<tbody>"
						output += "<tr>";
						output += "<td><img src='/muImage/"+list[i].muImage+"' style='width: 70px; height: 70px; border-radius: 70%; overflow: hidden;'></td>";
						output += "<td><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></td>";
						output += "<td>"+list[i].muSinger+"</td>";
						output += "<td>"+list[i].muLike+"</td>";
						output += "<td>"+list[i].muHit+"</td>";
						output += "<td>500원</td>";
						output += "<td><button id='"+list[i].muCode+"' class='cart__delete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></td>"
						output += "</tr>";
						output += "</tbodt>"
					}
					
					if(muprice <= 0){
						output += "</table>";
					} else{
						output1 += "<div>";
						output1 += "<p>총금액</p>";
						output1 += "<span colspan = 5 name='price' value='"+muprice * 500+"' id='totalPrice' class='cart__total'>"+muprice * 500+"원</span></div>";
						output2 += "<span class='sign__group sign__group--checkbox' id='span1'><input id='remember' name='remember' type='checkbox'>";
						output2 += "<label for='remember'>구매 <a href='privacy.html'>이용약관</a> 동의<br/>(필수)</label>";
						output2 += "</span>";
						output2 += "<span><button id='check_module' type='button' class='sign__btn'>결제하기</button></span>";
						output3 += "<i><img src='/icon/payment_icon_yellow_small.png' style='width: 60px; opacity: 0.6;'></i>"
						output += "</table>";
					}
					
					var cartListArea = document.getElementById('cartListArea');
					cartListArea.innerHTML = output;
					
					var totalAtea = document.getElementById('totalAtea');
					totalAtea.innerHTML = output1;
					
					var paybtnArea = document.getElementById('paybtnArea');
					paybtnArea.innerHTML = output2;
					
					var payContentArea = document.getElementById('payContentArea');
					payContentArea.innerHTML = output3;
					
					var cartMusicName = document.getElementsByClassName('cartMusicName');
					
					var firstCartMusicName = $('.cartMusicName').attr('name');
						
					console.log(firstCartMusicName);
					
					
					$(".cart__delete").click(function(){
						
						var muCode = $(this).attr('id');
						console.log("muCode : "+muCode);
						
						$.ajax({
							type : "POST",
							url : "cartListDelete",
							data : {"caMuCode" : muCode,
									"caMid" : sessionId
									},
							dataType : "json",
							success : function(list){
								cartList(list);
								$.ajax({
									type : "POST",
									url : "ajaxCartList",
									data : {"caMid" : sessionId},
									dataType : "json",
									success : function(list){
										smallCart(list);
									},
									error : function(){
										console.log("장바구니 개수 출력 실패");
									}
								});
							},
							error : function(){
								alert('장바구니 삭제 실패');
							}
						});
						
					});
					
					$("#check_module").click(function () {
						
						if($("#remember").is(':checked') == true){
							var IMP = window.IMP; // 생략가능
							IMP.init('imp58457377');
							// 'iamport' 대신 부여받은 "가맹점 식별코드"를 사용
							// i'mport 관리자 페이지 -> 내정보 -> 가맹점식별코드
							IMP.request_pay({
								pg: 'inicis', // version 1.1.0부터 지원.
								/*
								'kakao':카카오페이,
								html5_inicis':이니시스(웹표준결제)
									'nice':나이스페이
									'jtnet':제이티넷
									'uplus':LG유플러스
									'danal':다날
									'payco':페이코
									'syrup':시럽페이
									'paypal':페이팔
								*/
							pay_method: 'card',
								/*
								'samsung':삼성페이,
								'card':신용카드,
								'trans':실시간계좌이체,
								'vbank':가상계좌,
								'phone':휴대폰소액결제
								*/
							merchant_uid: 'merchant_' + new Date().getTime(),
								/*
								merchant_uid에 경우
								https://docs.iamport.kr/implementation/payment
								위에 url에 따라가시면 넣을 수 있는 방법이 있습니다.
								참고하세요.
								나중에 포스팅 해볼게요.
								*/
								
							name: '노래제목:'+firstCartMusicName+' 외'+ (muprice-1) +'곡',
							//결제창에서 보여질 이름
							
							amount: muprice * 500,
							//가격
							
							buyer_email: 'iamport@siot.do',
							buyer_name: sessionId,
							buyer_tel: '010-1234-5678',
							buyer_addr: '서울특별시 강남구 삼성동',
							buyer_postcode: '123-456',
							m_redirect_url: 'https://www.yourdomain.com/payments/complete'
								/*
								모바일 결제시,
								결제가 끝나고 랜딩되는 URL을 지정
								(카카오페이, 페이코, 다날의 경우는 필요없음. PC와 마찬가지로 callback함수로 결과가 떨어짐)
								*/
							}, function (rsp) {
								console.log(rsp);
								if (rsp.success) {
									var msg = '결제가 완료되었습니다.';
									msg += '고유ID : ' + rsp.imp_uid;
									msg += '상점 거래ID : ' + rsp.merchant_uid;
									msg += '결제 금액 : ' + rsp.paid_amount;
									msg += '카드 승인번호 : ' + rsp.apply_num;
									
									$('.cartMusicName').each(function(){
										var cartMusicCode = $(this).attr('id');
										var cartMusicSinger = $(this).attr('value');
										console.log(cartMusicCode);
										console.log(cartMusicSinger);
										console.log(sessionId);
										
										$.ajax({
											type: "POST",
											url: "payInsert",
											data: { "pMuCode" : cartMusicCode,
													"pbMid" : cartMusicSinger,
													"psMid" : sessionId},
											dataType : "json",
											async: false,
											success : function(list){
												cartList(list);
												smallCart(list);
											},
											error : function(){
												console.log('결제테이블 등록 실패');
											}
										});
									});
									
								} else {
									var msg = '결제에 실패하였습니다.';
									msg += '에러내용 : ' + rsp.error_msg;
								}
								alert(msg);
							});
						} else if($("#remember").is(':checked') == false){
							alert("약관 동의 후 구매 가능합니다.");
						}
					});
				}
				function smallCart(list){
					var cartCountArea = document.getElementById('cartCountArea');
					
					if(list.length <= 0){
						cartCountArea.innerHTML = "";
					} else{
						cartCountArea.innerHTML = list.length;
					}
					
					var output = "";
					
					if(list.length > 4){
						output += "<a href='/cartList' class='header__all'>Go to cart</a>";
						for(var i=0; i<4; i++){
							output += "<div class='header__product'>";
							output += "<img src='muImage/"+list[i].muImage+"' style='width: 50px; height: 50px; border-radius: 70%; overflow: hidden;'>";
							output += "<p><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></p>";
							output += "<span>"+list[i].muSinger+"</span>";
							output += "<button id='"+list[i].muCode+"' class='cartDelete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></div>";
						}
					}else if(list.length == 0){
						output += "<div class='header__product' style='padding-left:33px; padding-right:33px;'>";
						output += "<span>장바구니가 비어있습니다.</span></div>"
					}else{
						output += "<a href='/cartList' class='header__all'>Go to cart</a>";
						for(var i in list){
							output += "<div class='header__product'>";
							output += "<img src='muImage/"+list[i].muImage+"' style='width: 50px; height: 50px; border-radius: 70%; overflow: hidden;'>";
							output += "<p><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></p>";
							output += "<span>"+list[i].muSinger+"</span>";
							output += "<button id='"+list[i].muCode+"' class='cartDelete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></div>";
						}
					}
					
					
					var smallCartListArea = document.getElementById('smallCartListArea');
					smallCartListArea.innerHTML = output;
					
					$(".cartDelete").click(function(){
						
						var muCode = $(this).attr('id');
						console.log("muCode : "+muCode);
						
						$.ajax({
							type : "POST",
							url : "cartListDelete",
							data : {"caMuCode" : muCode,
									"caMid" : sessionId
									},
							dataType : "json",
							success : function(list){
								smallCart(list);
								$("#myMusicListArea").load(window.location.href + "#myMusicListArea");
								
								$.ajax({
									type : "POST",
									url : "ajaxCartList",
									data : {"caMid" : sessionId},
									dataType : "json",
									success : function(list){
										cartList(list);
									},
									error : function(){
										alert("실패");
									}
								});
							},
							error : function(){
								alert('장바구니 삭제 실패');
							}
						});
					});
				}
			});
		}
		
		
		
		$(function() {
		    $("input[type=submit]").click(function() {
		        var result = $.trim($("input[type=text]").val());
		       console.log("검색"+result);
		        
		        if (!result) {
		        	
		          alert("등록완료");
		        }
		    })
		})
		

	
/* $(document).ready(function(){
 	
	$.ajax({
		type : "POST",
		url :"test",
		dataType:"json",
		success : function(list){
			
			test(list);
			
			console.log(list);
		},
		error : function(){
			alert("시르패르");
		}
	});
	
 
});



	function test(list){
		
		for(var i in list){
		
		var output="";
		output+="<ul>";
		output+="<li>"+list[i].keyword+"</li>"
		output+="</ul>"; 
		
		
	
		

			var rank=document.getElementById('rank');
			console.log("실시간"+rank);
			rank.innerHTML=output;
			
		
			}
	} */
	</script>
	<script th:if="${session.login eq null}" type="text/javascript" th:inline="javascript">
	var sessionId = "nullId";
	$(document).ready(function(){
		
		$.ajax({
    		type : "POST",
    		url :"test",
    		dataType:"json",
    		success : function(list){
    			
    			test(list);
    			console.log(list);
    		},
    		error : function(){
    			alert("시르패르");
    		}
    	});
    	

    	function test(list){
    		
    		
    		var output="";
    		var output1="";
    		output+="<marquee style='height:25px;' behavior='scroll' direction='up' scrollamount='1' onmouseover=this.stop() onmouseout=this.start()>";
    	
    		var arr = [1,2,3,4,5,6,7,8,9,10];
    		
    		for(var i in list){
    		for(var i in arr){	
    		output+="<span style='opacity:0.5;'>"+arr[i]+".</span> <a style='color:#fff;' href='search?keyword="+list[i].keyword+"'>"+list[i].keyword+"</a>"
    		output+="</br>"
    			}
    		break;
    		}
    		
    		output+="</marquee>"
    		var rank=document.getElementById('rank');
			console.log("실시간"+rank);
			rank.innerHTML=output;
			
			/* var box = document.getElementById('rank');
	    
	    	
	    	box.addEventListener('mouseover',function(){
	    		
	    		
	    	});
			box.addEventListener('mouseout',function(){
	    		

    	}); */
  
    	}
	});
	</script>
	
	</header>
</body>


	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/smooth-scrollbar.js"></script>
	<script src="js/select2.min.js"></script>
	<script src="js/slider-radio.js"></script>
	<script src="js/jquery.inputmask.min.js"></script>
	<script src="js/plyr.min.js"></script>
	<script src="js/main.js"></script>


</html>