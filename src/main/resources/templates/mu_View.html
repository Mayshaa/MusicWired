<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- CSS -->
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/select2.min.css">
    <link rel="stylesheet" href="css/paymentfont.min.css">
    <link rel="stylesheet" href="css/slider-radio.css">
    <link rel="stylesheet" href="css/plyr.css">
    <link rel="stylesheet" href="css/main.css">

    <!-- Favicons -->
    <link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32">
    <link rel="apple-touch-icon" href="icon/favicon-32x32.png">

    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Dmitry Volkov">
    <title>Volna – Record label & Music streaming HTML Template</title>

</head>

<style>

	.P-muLyrics1{
	max-width: 50%;
 	height: auto;
 	display: block;
    font-size: 13px;
    line-height: 26px;
    font-weight: 400;
    color: #c0c0c0;
    background-color: #222227;
    border-radius: 16px;
    padding: 6px;
	}
	
    #modal.modal-overlay {

        width: 100%;
        height: 100%;
        position: absolute;
        left: 0;
        top: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.25);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        backdrop-filter: blur(1.5px);
        -webkit-backdrop-filter: blur(1.5px);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        display: none;
        z-index: 1050;
    }
    #modal .modal-window {
        position: relative;
        box-shadow: 0 8px 32px 0 rgba(88, 88, 88, 0.37);
        backdrop-filter: blur( 13.5px );
        display: block;
        background-color: #16151a;
        margin: 40px auto;
        width: 100%;
        max-width: 420px;
        padding: 20px;
        border-radius: 12px;
        overflow: hidden;
    }
    #modal .title {
        padding-left: 10px;
        display: inline;
        text-shadow: 1px 1px 2px gray;
        color: white;
    }
    #modal .title h2 {
        display: inline;
    }
    #modal .close-area {
        display: inline;
        float: right;
        padding-right: 10px;
        cursor: pointer;
        text-shadow: 1px 1px 2px gray;
        color: white;
    }

    #modal .content {
        margin-top: 20px;
        padding: 0px 10px;
        text-shadow: 1px 1px 2px gray;
        color: white;
    }


    #LikeImg {
        display: none;
    }



    #DeleteBtn {
        float: right;
        margin-right: 10px;
    }

    #modiBtn {
        float: right;
    }

    .article__price1{
        color: #fff;
        -webkit-transition: 0.5s;
    }

    .article__price1:hover{
        color: #0099FF;
        -webkit-transition:color 0.5s;
    }
</style>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<body>
<!-- header -->
<header th:replace="header.html :: header"></header>
<!-- end header -->

<!-- sidebar -->
<aside th:replace="sidebar.html :: aside"></aside>
<!-- end sidebar -->

<!-- player -->
<div class="player">
    <div class="player__cover">
        <img th:src="@{/muImage/{muImage}(muImage=${muView.muImage})}" style="width:100px;"/>
    </div>

    <div class="player__content">
        <span class="player__track" th:text="${muView.muName}"><b class="player__title"></b></span>
        <!--        <audio th:src="@{/audio/{mFile}(mFile=${muView.mFile})}" id="audio" controls></audio>-->
        <audio controls="controls" th:id="audio">
            <source th:src="@{/audio/{mFile}(mFile=${muView.mFile})}" style="width:200px;" type="audio/mpeg">
        </audio>
        <!--        <audio controls="controls" th:src="@{/audio/{mFile}(mFile=${muView.mFile})}" style="width:200px;" type="audio/mpeg">-->
    </div>
</div>

<button class="player__btn" type="button">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z"/>
    </svg>
    Player
</button>
<!-- end player -->

<!-- main content -->
<main class="main">
    <div class="container-fluid">
        <div class="row row--grid">
            <!-- breadcrumb -->
            <div class="col-12">
                <ul class="breadcrumb">
                    <li class="breadcrumb__item"><a href="/index">Home</a></li>
                    <li class="breadcrumb__item breadcrumb__item--active">Product</li>
                </ul>
            </div>
            <!-- end breadcrumb -->


            <div class="col-12">
                <div class="store-item">
                    <div class="store-item__content">
                        <div class="store-item__carousel owl-carousel">
                            <div class="store-item__cover">
                                <a class="single-item__cover">
                                    <img th:src="@{/muImage/{muImage}(muImage=${muView.muImage})}">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path d="M18.54,9,8.88,3.46a3.42,3.42,0,0,0-5.13,3V17.58A3.42,3.42,0,0,0,7.17,21a3.43,3.43,0,0,0,1.71-.46L18.54,15a3.42,3.42,0,0,0,0-5.92Zm-1,4.19L7.88,18.81a1.44,1.44,0,0,1-1.42,0,1.42,1.42,0,0,1-.71-1.23V6.42a1.42,1.42,0,0,1,.71-1.23A1.51,1.51,0,0,1,7.17,5a1.54,1.54,0,0,1,.71.19l9.66,5.58a1.42,1.42,0,0,1,0,2.46Z"/>
                                    </svg>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path d="M16,2a3,3,0,0,0-3,3V19a3,3,0,0,0,6,0V5A3,3,0,0,0,16,2Zm1,17a1,1,0,0,1-2,0V5a1,1,0,0,1,2,0ZM8,2A3,3,0,0,0,5,5V19a3,3,0,0,0,6,0V5A3,3,0,0,0,8,2ZM9,19a1,1,0,0,1-2,0V5A1,1,0,0,1,9,5Z"/>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="store-item__description">
                        <!-- article content -->
                        <div class="article__content">
                            <h3 th:text="${muView.muName}"></h3>

 							<a th:if="${session.login ne null}" th:href="@{boardWriterView(boWriter=${muView.muSinger},mId=${session.login.mId})}"><span class="article__price1" th:text="${muView.muSinger}" style="font-size: 18px;"></span></a>
							<a th:if="${session.login eq null}" th:href="@{boardWriterView(boWriter=${muView.muSinger},mId=nullId)}"><span class="article__price1" th:text="${muView.muSinger}" style="font-size: 18px;"></span></a>
                			 <p th:text="${muView.muGanre+'('+muView.muDate+')'}"></p>
		     				 <div class="P-muLyrics1">
                 		     <p class="P-muLyrics" th:text="${muView.muLyrics}"></p>
							</div>

                            <!--                            <div class="article__amount">-->
                            <!--                                <button type="button">-->
                            <!--                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,11H5a1,1,0,0,0,0,2H19a1,1,0,0,0,0-2Z"></path></svg>-->
                            <!--                                </button>-->
                            <!--                                <input type="text" value="1">-->
                            <!--                                <button type="button">-->
                            <!--                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,11H13V5a1,1,0,0,0-2,0v6H5a1,1,0,0,0,0,2h6v6a1,1,0,0,0,2,0V13h6a1,1,0,0,0,0-2Z"></path></svg>-->
                            <!--                                </button>-->
                            <!--                            </div>-->

                            <!--                            <a href="#" class="article__buy"></a>-->


                        </div>


                        <div id="root">

                            <label th:if="${LikeCheck eq 0}"><img th:src="@{/heart/love.png}" th:width="35px"/>
                                <button th:if="${LikeCheck eq 0}" style="width:30px;" HEIGHT="30"
                                        th:id="LikeImg" th:value="Like"></button>
                            </label>
                            <label th:if="${LikeCheck eq 1}"><img th:src="@{/heart/heart2.png}" th:width="30px"/>
                                <button th:if="${LikeCheck eq 1}" style="width:30px;" HEIGHT="30"
                                        th:id="LikeImg" th:value="LikeDown"></button>
                            </label>
                            <button th:type="button" th:text="${list}+'명이 좋아합니다.'" th:id="muLike"
                                    style="color : wheat"></button>
                        </div>
                        <!-- end article content -->
                        <!--조회수-->
                        <div class="release__stat">
                            <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z"/><strong th:text="${muView.muHit}"></strong></path></svg></span>
                        </div>
                        <!-- share -->

                        <!-- end share -->
                    </div>
                </div>
            </div>
        </div>

        <!-- recommend -->

        <!-- end title -->


        </section>
        <!-- end recommend -->
    </div>
    <br/>
    <!--    <div>-->
    <!--        <textarea rows="5" cols="20" th:id=mcContent style="width: 500px"></textarea>-->
    <!--        <button th:id="mcCommBtn" style="color:wheat;">댓글 입력</button>-->
    <!--    </div>-->
    <!-- comments -->
    <div class="comments" th:id="mucommentArea"></div>

    <form action="#" class="comments__form">
        <div class="sign__group">
            <textarea th:id=mcContent rows="5" cols="20" class="sign__textarea" placeholder="Add comment"></textarea>
            <button type="button" th:id="mcCommBtn" class="sign__btn">Send</button>
        </div>
    </form>

    <!-- end comments -->
</main>
<!-- end main content -->

<!-- footer -->
<footer th:replace="footer.html :: footer"></footer>
<!-- end footer -->

<!-- modal info -->
<div id="modal-info2" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--green">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path
                    d="M14.72,8.79l-4.29,4.3L8.78,11.44a1,1,0,1,0-1.41,1.41l2.35,2.36a1,1,0,0,0,.71.29,1,1,0,0,0,.7-.29l5-5a1,1,0,0,0,0-1.42A1,1,0,0,0,14.72,8.79ZM12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"></path></svg>
		</span>

    <button class="modal__close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/>
        </svg>
    </button>

    <h4 class="sign__title">Payment #51 was successful!</h4>

    <div class="sign__group sign__group--row">
        <label class="sign__label">Total cost:</label>
        <span class="sign__value">$18.00</span>
    </div>

    <div class="sign__group sign__group--row">
        <label class="sign__label">Payment method: <b>Paypal</b></label>

        <span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
    </div>
</div>
<!-- end modal info -->

<!-- modal info -->
<div id="modal-info3" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--red">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path
                    d="M15.71,8.29a1,1,0,0,0-1.42,0L12,10.59,9.71,8.29A1,1,0,0,0,8.29,9.71L10.59,12l-2.3,2.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L13.41,12l2.3-2.29A1,1,0,0,0,15.71,8.29Zm3.36-3.36A10,10,0,1,0,4.93,19.07,10,10,0,1,0,19.07,4.93ZM17.66,17.66A8,8,0,1,1,20,12,7.95,7.95,0,0,1,17.66,17.66Z"></path></svg>
		</span>

    <button class="modal__close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/>
        </svg>
    </button>

    <h4 class="sign__title">Payment #50 failed!</h4>

    <div class="sign__group sign__group--row">
        <label class="sign__label">Total cost:</label>
        <span class="sign__value">$18.00</span>
    </div>

    <div class="sign__group sign__group--row">
        <label class="sign__label">Payment method: <b>Paypal</b></label>

        <span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
    </div>
</div>
<!-- end modal info -->

<!-- modal info -->
<div id="modal-info4" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path
                    d="M12,2A10,10,0,1,0,22,12,10.01114,10.01114,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.00917,8.00917,0,0,1,12,20Zm0-8.5a1,1,0,0,0-1,1v3a1,1,0,0,0,2,0v-3A1,1,0,0,0,12,11.5Zm0-4a1.25,1.25,0,1,0,1.25,1.25A1.25,1.25,0,0,0,12,7.5Z"></path></svg>
		</span>

    <button class="modal__close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/>
        </svg>
    </button>

    <h4 class="sign__title">Example of notification.</h4>

    <div class="sign__group sign__group--row">
        <label class="sign__label">Amount to auto-renew:</label>
        <span class="sign__value">$18.00</span>
    </div>

    <div class="sign__group sign__group--row">
        <span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
    </div>
</div>
<!-- end modal info -->

<!-- modal info -->
<div id="modal-info5" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--purple">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path
                    d="M18,7h-.35A3.45,3.45,0,0,0,18,5.5a3.49,3.49,0,0,0-6-2.44A3.49,3.49,0,0,0,6,5.5,3.45,3.45,0,0,0,6.35,7H6a3,3,0,0,0-3,3v2a1,1,0,0,0,1,1H5v6a3,3,0,0,0,3,3h8a3,3,0,0,0,3-3V13h1a1,1,0,0,0,1-1V10A3,3,0,0,0,18,7ZM11,20H8a1,1,0,0,1-1-1V13h4Zm0-9H5V10A1,1,0,0,1,6,9h5Zm0-4H9.5A1.5,1.5,0,1,1,11,5.5Zm2-1.5A1.5,1.5,0,1,1,14.5,7H13ZM17,19a1,1,0,0,1-1,1H13V13h4Zm2-8H13V9h5a1,1,0,0,1,1,1Z"></path></svg>
		</span>

    <button class="modal__close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/>
        </svg>
    </button>

    <h4 class="sign__title">You have received a gift!</h4>

    <div class="sign__group sign__group--row">
        <span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>

        <span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
    </div>
</div>
<!-- end modal info -->


<input th:if="${session.login ne null}" type="hidden" th:value="${session.login.mId}" th:id="mId">
<input type="hidden" th:value="${muView.muCode}" th:id="muCode" th:text="${muView.muCode}">

<div id="container">
    <div id="lorem-ipsum"></div>
</div>
<div id="modal" class="modal-overlay" role="dialog">
    <div class="modal-window">
        <div class="title">
            <h2 id="modalTitle"></h2>
        </div>
        <div class="close-area">X</div>
        <div class="content" id="content">
        </div>
    </div>
</div>


<!--규익 - 내가 실수로 div 지웠던 같음. 혹시 머지때 곂치면 내가 쓴거 지우면 됨.-->
<!--<div th:id="mucommentArea"></div>-->

</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"></script>
<script th:if="${session.login ne null}" th:inline="javascript">


    var CheckLogin = [[${session.login}]]

    if(CheckLogin != null){
        var sessionId = [[${session.login.mId}]]
    }

    // var muLike = document.getElementById('muLike');  //이미지 클릭시 화면에 출력되는 숫자 값

    const muCode = document.getElementById('muCode').value; // 음악 코드 값
    //const mId = document.getElementById('mId').value; // 아이디 값

    $(document).ready(function () {

        //댓글 div 실행
        var mcCode = $("#muCode").val();
        $.ajax({
            type: "POST",
            url: "mcList",
            data: {"mcCode": mcCode},
            dataType: "json",
            success: function (list) {
                commentList(list);
                console.log(list);
            },
            error: function () {
                alert('실패');
            }
        })

        //댓글 버튼 클릭 시 ajax 실행
        $('#mcCommBtn').click(function () {
            if (!sessionId) {
                alert('로그인 이후 사용하세요!');
                location.href = "memberLogin";
            } else {
                var mcMid = sessionId;
                var mcContent = $('#mcContent').val();
                var mcMuNum = $('#muCode').val();

                $.ajax({
                    type: "POST",
                    url: "mcWrite",
                    data: {
                        "mcMid": mcMid,
                        "mcContent": mcContent,
                        "mcMuNum": mcMuNum
                    },
                    datatype: "json",
                    success: function (list) {
                        console.log("성공" + list);
                        commentList(list);
                        $('#mcContent').val("");
                    },
                    error: function () {
                        alert('댓댓 라잌 댓글 안됨');
                    }

                });
            }
        });

    });

    //  댓글 목록 조회
    function commentList(list) {
        var output = "";
        console.log(list);
        for (var i in list) {
            output +="<div>"
            output += "<ul class='comments__list'>";
            output += "<li class='comments__item'>";
            output += "<div class='comments__autor'>";
            output += "<img class='comments__avatar' src='/profile/"+list[i].mprofileName+"'>";
            output += "<span class='comments__name'>" + list[i].mcMid + "</span>";
            output += "<span class='comments__name'>" + list[i].mcDate + "</span>";
            output += "</div>";
            output += "<p class='comments__text'>" + list[i].mcContent + "</p>";
            output += "<div class='comments__actions'>"
            if (list[i].mcMid == sessionId) {
                output += "<button  style='color: wheat' onclick='mcCommentModify(" + list[i].mcCode + "," + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
            } else {
                output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
            }
            if (list[i].mcMid == sessionId || sessionId == 'admin') {
                output += "<button  style='color: wheat' onclick = 'muCommentDelete(mcCode=" + list[i].mcCode + ",mcMuNum=" + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
            } else {
                output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
            }
            output += "</div>";
            output +="</div>"
            output += "</br>"

        }
        var mucommentArea = document.getElementById('mucommentArea');
        mucommentArea.innerHTML = output;

    }

    function mcCommentModify(mcCode, mcMuNum) {
        var check = confirm('댓글을 수정하시겠습니까?');
        var mcContent = $('#mcContent').val();
        if (check) {
            $.ajax({
                type: "POST",
                url: "mcModify",
                data: {
                    "mcCode": mcCode,
                    "mcMuNum": mcMuNum,
                    "mcContent": mcContent
                },
                dataType: "json",
                success: function (list) {
                    commentList(list);
                    $('#mcContent').val(""); //작성한 내용 을 댓글입력과 동시에 내용을 "";
                },
                error: function () {
                    alert('댓글 수정 실패');
                }
            });
        }
    }

    function muCommentDelete(mcCode, mcMuNum) {
        var check = confirm('댓글을 삭제하시겠습니까?');

        $.ajax({
            type: "POST",
            url: "mcDelete",
            data: {"mcCode": mcCode, "mcMuNum": mcMuNum},
            dataType: "json",
            success: function (list) {
                commentList(list);
            },
            error: function () {
                alert('삭제 실패');
            }

        });
    }

    //좋아요 버튼을 클릭 시 실행되는 코드
    $("#LikeImg").click(function () {

    
        const muCode = document.getElementById('muCode').value; // 음악 코드 값
        var LikeImg = $("#LikeImg").val();

        console.log('코드' + muCode);
        console.log('아이디 : ' + sessionId);
        console.log('LikeImg : ' + LikeImg);

        if ($("#LikeImg").val() == "Like") {
            $.ajax({
                type: "POST",
                url: "LikeUp",
                data: {
                    "mulmuCode": muCode,
                    "mulMid": sessionId
                },
                dataType: "json",
                success: function (likeUpCount) {

                    console.log("업 : " + likeUpCount)
                    $("#muLike").empty().append(likeUpCount + '명이 좋아합니다.');
                    $("#LikeImg").attr('value', 'LikeDown');
                    location.reload();
                },
                error: function () {
                    console.log('오타가 숨어있다.');
                }
            });
        } else {
            $.ajax({
                type: "POST",
                url: "LikeDown",
                data: {
                    "mulmuCode": muCode,
                    "mulMid": sessionId
                },
                dataType: "json",
                success: function (likeDownCount) {

                    console.log('다운: ' + likeDownCount)
                    $("#muLike").empty().append(likeDownCount + '명이 좋아합니다.');
                    $("#LikeImg").attr('value', 'Like');
                    location.reload();
                },
                error: function () {
                    console.log('오타가 숨어있다.!!!');
                }
            });

        }


    });


    $("#muLike").click(function () {
        const muCode = document.getElementById('muCode').value;
        console.log(sessionId);
        console.log(muCode);
        $.ajax({
            type: "POST",
            url: "MusicLikeList",
            data: {"mulmuCode": muCode},
            dataType: "json",
            success: function (LikeList) {
                console.log(LikeList);
                var output = "";
                var output1 = "좋아요";

                for (var i in LikeList) {
                    if (LikeList.length > 0) {
                        output += "<a href='boardWriterView?boWriter=" + LikeList[i].mId + "'><p><img src='/profile/" + LikeList[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'> &nbsp;" + LikeList[i].mName + "</p></a>"
                        // <a href='boardWriterView?boWriter="+list[i].boWriter+"&mId="+sessionId+"'>" + list[i].boWriter + "</a>
                    }
                }
                const modalContent = document.getElementById("content");
                modalContent.innerHTML = output;

                var modalTitle = document.getElementById("modalTitle");
                modalTitle.innerHTML = output1;

                const modal = document.getElementById("modal")

                modal.style.display = "flex"

                const closeBtn = modal.querySelector(".close-area")
                closeBtn.addEventListener("click", e => {
                    modal.style.display = "none"
                });

                modal.addEventListener("click", e => {
                    const evTarget = e.target
                    if (evTarget.classList.contains("modal-overlay")) {
                        modal.style.display = "none"
                    }
                });

                window.addEventListener("keyup", e => {
                    if (modal.style.display === "flex" && e.key === "Escape") {
                        modal.style.display = "none"
                    }
                });


            },
            error: function () {
                alert('구독자 목록 불러오기 실패');
            }
        });
    });


    // 댓글 목록 조회
    // function commentList(list) {
    //     var output = "";
    //     console.log(list);
    //     for (var i in list) {
    //         output +="<div>"
    //         output += "<ul class='comments__list'>";
    //         output += "<li class='comments__item'>";
    //         output += "<div class='comments__autor'>";
    //        // output += "<img class='comments__avatar' src='/profile/"+list[i].mProfileName+"'>";
    //         output += "<span class='comments__name'>" + list[i].mcMid + "</span>";
    //         output += "<span class='comments__name'>" + list[i].mcDate + "</span>";
    //         output += "</div>";
    //         output += "<p class='comments__text'>" + list[i].mcContent + "</p>";
    //         output += "<div class='comments__actions'>"
    //         if (list[i].mcMid == sessionId) {
    //             output += "<button  style='color: wheat' onclick='mcCommentModify(" + list[i].mcCode + "," + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
    //         } else {
    //             output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
    //         }
    //         if (list[i].mcMid == sessionId || sessionId == 'admin') {
    //             output += "<button  style='color: wheat' onclick = 'muCommentDelete(mcCode=" + list[i].mcCode + ",mcMuNum=" + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
    //         } else {
    //             output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
    //         }
    //         output += "</div>";
    //         output +="</div>"
    //         output += "</br>"
    //
    //     }
    //     var mucommentArea = document.getElementById('mucommentArea');
    //     mucommentArea.innerHTML = output;
    //
    // }


    function mcCommentModify(mcCode, mcMuNum) {
        var check = confirm('댓글을 수정하시겠습니까?');
        var mcContent = $('#mcContent').val();
        if (check) {
            $.ajax({
                type: "POST",
                url: "mcModify",
                data: {
                    "mcCode": mcCode,
                    "mcMuNum": mcMuNum,
                    "mcContent": mcContent
                },
                dataType: "json",
                success: function (list) {
                    commentList(list);
                    $('#mcContent').val(""); //작성한 내용 을 댓글입력과 동시에 내용을 "";
                },
                error: function () {
                    alert('댓글 수정 실패');
                }
            });
        }
    }

    // function muCommentDelete(mcCode, mcMuNum) {
    //     var check = confirm('댓글을 삭제하시겠습니까?');
    //
    //     $.ajax({
    //         type: "POST",
    //         url: "mcDelete",
    //         data: {"mcCode": mcCode, "mcMuNum": mcMuNum},
    //         dataType: "json",
    //         success: function (list) {
    //             commentList(list);
    //         },
    //         error: function () {
    //             alert('삭제 실패');
    //         }
    //
    //     });
    // }
    var audio = document.getElementById("audio"); //오디오 id 값으로 변수 지정

    audio.addEventListener("play", playList); //변수 audio에 addEventListener 이벤트로 "play" 되었을 때 'playList' 함수 실행

    function playList() {
        var sessionId = $("#mId").val();
        const muCode = document.getElementById('muCode').value; // 음악 코드 값

        $.ajax({
            type: "POST",
            url: "playList",
            data: {
                "plmuCode": muCode,
                "plMid": sessionId
            },
            dataType: "json",
            success: function (playListInsert) {

            },
            error: function () {
                console.log("에러에러!!")
            }
        });

    }
    $("#muLike").click(function () {
        $("#modal").fadeIn();
    });

    $("#modal_close_btn").click(function () {
        $("#modal").fadeOut();
    });
</script>

<script th:if="${session.login eq null}" th:inline="javascript">
var sessionId = "nullId";
// var muLike = document.getElementById('muLike');  //이미지 클릭시 화면에 출력되는 숫자 값

const muCode = document.getElementById('muCode').value; // 음악 코드 값
//const mId = document.getElementById('mId').value; // 아이디 값

$(document).ready(function () {

    //댓글 div 실행
    var mcCode = $("#muCode").val();
    $.ajax({
        type: "POST",
        url: "mcList",
        data: {"mcCode": mcCode},
        dataType: "json",
        success: function (list) {
            commentList(list);
            console.log(list);
        },
        error: function () {
            alert('실패');
        }
        var mucommentArea = document.getElementById('mucommentArea');
        mucommentArea.innerHTML = output;


    //댓글 버튼 클릭 시 ajax 실행
    $('#mcCommBtn').click(function () {
        if (!sessionId) {
            alert('로그인 이후 사용하세요!');
            location.href = "memberLogin";
        } else {
            var mcMid = sessionId;
            var mcContent = $('#mcContent').val();
            var mcMuNum = $('#muCode').val();


    function mcCommentModify(mcCode, mcMuNum) {
        var check = confirm('댓글을 수정하시겠습니까?');
        var mcContent = $('#mcContent').val();
        if (check) {
            $.ajax({
                type: "POST",
                url: "mcModify",
                data: {
                    "mcCode": mcCode,
                    "mcMuNum": mcMuNum,
                    "mcContent": mcContent
                },
                dataType: "json",
                success: function (list) {
                    commentList(list);
                    $('#mcContent').val(""); //작성한 내용 을 댓글입력과 동시에 내용을 "";
                },
                error: function () {
                    alert('댓글 수정 실패');
                }
            });
        }

    });

});

//  댓글 목록 조회
function commentList(list) {
    var output = "";
    console.log(list);
    for (var i in list) {
        output +="<div>"
        output += "<ul class='comments__list'>";
        output += "<li class='comments__item'>";
        output += "<div class='comments__autor'>";
        output += "<img class='comments__avatar' src='/profile/"+list[i].mprofileName+"'>";
        output += "<span class='comments__name'>" + list[i].mcMid + "</span>";
        output += "<span class='comments__name'>" + list[i].mcDate + "</span>";
        output += "</div>";
        output += "<p class='comments__text'>" + list[i].mcContent + "</p>";
        output += "<div class='comments__actions'>"
        if (list[i].mcMid == sessionId) {
            output += "<button  style='color: wheat' onclick='mcCommentModify(" + list[i].mcCode + "," + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
        } else {
            output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
        }
        if (list[i].mcMid == sessionId || sessionId == 'admin') {
            output += "<button  style='color: wheat' onclick = 'muCommentDelete(mcCode=" + list[i].mcCode + ",mcMuNum=" + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
        } else {
            output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
        }
        output += "</div>";
        output +="</div>"
        output += "</br>"


    }

    function muCommentDelete(mcCode, mcMuNum) {
        var check = confirm('댓글을 삭제하시겠습니까?');

        $.ajax({
            type: "POST",
            url: "mcDelete",
            data: {"mcCode": mcCode, "mcMuNum": mcMuNum},
            dataType: "json",
            success: function (list) {
                commentList(list);
            },
            error: function () {
                alert('삭제 실패');
            }

        });
    }

    //좋아요 버튼을 클릭 시 실행되는 코드
    $("#LikeImg").click(function () {
        var sessionId = $("#mId").val();
        const muCode = document.getElementById('muCode').value; // 음악 코드 값
        var LikeImg = $("#LikeImg").val();

        console.log('코드' + muCode);
        console.log('아이디 : ' + sessionId);
        console.log('LikeImg : ' + LikeImg);

        if ($("#LikeImg").val() == "Like") {
            $.ajax({
                type: "POST",
                url: "LikeUp",
                data: {
                    "mulmuCode": muCode,
                    "mulMid": sessionId
                },
                dataType: "json",
                success: function (likeUpCount) {

                    console.log("업 : " + likeUpCount)
                    $("#muLike").empty().append(likeUpCount + '명이 좋아합니다.');
                    $("#LikeImg").attr('value', 'LikeDown');
                    location.reload();
                },
                error: function () {
                    console.log('오타가 숨어있다.');
                }
            });
        } else {
            $.ajax({
                type: "POST",
                url: "LikeDown",
                data: {
                    "mulmuCode": muCode,
                    "mulMid": sessionId
                },
                dataType: "json",
                success: function (likeDownCount) {

                    console.log('다운: ' + likeDownCount)
                    $("#muLike").empty().append(likeDownCount + '명이 좋아합니다.');
                    $("#LikeImg").attr('value', 'Like');
                    location.reload();
                },
                error: function () {
                    console.log('오타가 숨어있다.!!!');
                }
            });

        }


//좋아요 버튼을 클릭 시 실행되는 코드
$("#LikeImg").click(function () {
    var sessionId = $("#mId").val();
    const muCode = document.getElementById('muCode').value; // 음악 코드 값
    var LikeImg = $("#LikeImg").val();

    console.log('코드' + muCode);
    console.log('아이디 : ' + sessionId);
    console.log('LikeImg : ' + LikeImg);

    if ($("#LikeImg").val() == "Like") {
        $.ajax({
            type: "POST",
            url: "LikeUp",
            data: {
                "mulmuCode": muCode,
                "mulMid": sessionId
            },
            dataType: "json",
            success: function (likeUpCount) {
            
                console.log("업 : " + likeUpCount)
                $("#muLike").empty().append(likeUpCount + '명이 좋아합니다.');
                $("#LikeImg").attr('value', 'LikeDown');
                location.reload();
            },
            error: function () {
                console.log('오타가 숨어있다.');
            }
        });
    } else {
        $.ajax({
            type: "POST",
            url: "LikeDown",
            data: {
                "mulmuCode": muCode,
                "mulMid": sessionId
            },

            dataType: "json",
            success: function (LikeList) {

                var output = "";
                var output1 = "좋아요";

                for (var i in LikeList) {
                    if (LikeList.length > 0) {
                        output += "<a href='boardWriterView?boWriter=" + LikeList[i].mId + "'><p><img src='/profile/" + LikeList[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'>" + LikeList[i].mId + "</p></a>"
                        // <a href='boardWriterView?boWriter="+list[i].boWriter+"&mId="+sessionId+"'>" + list[i].boWriter + "</a>
                    }
                }
                const modalContent = document.getElementById("content");
                modalContent.innerHTML = output;

                var modalTitle = document.getElementById("modalTitle");
                modalTitle.innerHTML = output1;


});


$("#muLike").click(function () {
    const muCode = document.getElementById('muCode').value;
    console.log(sessionId);
    console.log(muCode);
    $.ajax({
        type: "POST",
        url: "MusicLikeList",
        data: {"mulmuCode": muCode},
        dataType: "json",
        success: function (LikeList) {
		
            var output = "";
            var output1 = "좋아요";
			
            for (var i in LikeList) {
                if (LikeList.length > 0) {
                    output += "<a href='boardWriterView?boWriter=" + LikeList[i].mId + "'><p><img src='/profile/" + LikeList[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'>" + LikeList[i].mId + "</p></a>"
                    // <a href='boardWriterView?boWriter="+list[i].boWriter+"&mId="+sessionId+"'>" + list[i].boWriter + "</a>
                }
            }
            const modalContent = document.getElementById("content");
            modalContent.innerHTML = output;


                modal.style.display = "flex"

                const closeBtn = modal.querySelector(".close-area")
                closeBtn.addEventListener("click", e => {
                    modal.style.display = "none"
                });

                modal.addEventListener("click", e => {
                    const evTarget = e.target
                    if (evTarget.classList.contains("modal-overlay")) {
                        modal.style.display = "none"
                    }
                });

                window.addEventListener("keyup", e => {
                    if (modal.style.display === "flex" && e.key === "Escape") {
                        modal.style.display = "none"
                    }
                });


            },
            error: function () {
                alert('구독자 목록 불러오기 실패');
            }
        });
    });


    // 댓글 목록 조회
    // function commentList(list) {
    //     var output = "";
    //     console.log(list);
    //     for (var i in list) {
    //         output +="<div>"
    //         output += "<ul class='comments__list'>";
    //         output += "<li class='comments__item'>";
    //         output += "<div class='comments__autor'>";
    //        // output += "<img class='comments__avatar' src='/profile/"+list[i].mProfileName+"'>";
    //         output += "<span class='comments__name'>" + list[i].mcMid + "</span>";
    //         output += "<span class='comments__name'>" + list[i].mcDate + "</span>";
    //         output += "</div>";
    //         output += "<p class='comments__text'>" + list[i].mcContent + "</p>";
    //         output += "<div class='comments__actions'>"
    //         if (list[i].mcMid == sessionId) {
    //             output += "<button  style='color: wheat' onclick='mcCommentModify(" + list[i].mcCode + "," + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
    //         } else {
    //             output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
    //         }
    //         if (list[i].mcMid == sessionId || sessionId == 'admin') {
    //             output += "<button  style='color: wheat' onclick = 'muCommentDelete(mcCode=" + list[i].mcCode + ",mcMuNum=" + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
    //         } else {
    //             output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
    //         }
    //         output += "</div>";
    //         output +="</div>"
    //         output += "</br>"
    //
    //     }
    //     var mucommentArea = document.getElementById('mucommentArea');
    //     mucommentArea.innerHTML = output;
    //
    // }


    function mcCommentModify(mcCode, mcMuNum) {
        var check = confirm('댓글을 수정하시겠습니까?');
        var mcContent = $('#mcContent').val();
        if (check) {
            $.ajax({
                type: "POST",
                url: "mcModify",
                data: {
                    "mcCode": mcCode,
                    "mcMuNum": mcMuNum,
                    "mcContent": mcContent
                },
                dataType: "json",
                success: function (list) {
                    commentList(list);
                    $('#mcContent').val(""); //작성한 내용 을 댓글입력과 동시에 내용을 "";
                },
                error: function () {
                    alert('댓글 수정 실패');
                }
            });
        }
    }

    // function muCommentDelete(mcCode, mcMuNum) {
    //     var check = confirm('댓글을 삭제하시겠습니까?');
    //
    //     $.ajax({
    //         type: "POST",
    //         url: "mcDelete",
    //         data: {"mcCode": mcCode, "mcMuNum": mcMuNum},
    //         dataType: "json",
    //         success: function (list) {
    //             commentList(list);
    //         },
    //         error: function () {
    //             alert('삭제 실패');
    //         }
    //
    //     });
    // }
    var audio = document.getElementById("audio"); //오디오 id 값으로 변수 지정

    audio.addEventListener("play", playList); //변수 audio에 addEventListener 이벤트로 "play" 되었을 때 'playList' 함수 실행

    function playList() {
        var sessionId = $("#mId").val();
        const muCode = document.getElementById('muCode').value; // 음악 코드 값

        },
        error: function () {
            alert('구독자 목록 불러오기 실패');
        }
    });
});


// 댓글 목록 조회
// function commentList(list) {
//     var output = "";
//     console.log(list);
//     for (var i in list) {
//         output +="<div>"
//         output += "<ul class='comments__list'>";
//         output += "<li class='comments__item'>";
//         output += "<div class='comments__autor'>";
//        // output += "<img class='comments__avatar' src='/profile/"+list[i].mProfileName+"'>";
//         output += "<span class='comments__name'>" + list[i].mcMid + "</span>";
//         output += "<span class='comments__name'>" + list[i].mcDate + "</span>";
//         output += "</div>";
//         output += "<p class='comments__text'>" + list[i].mcContent + "</p>";
//         output += "<div class='comments__actions'>"
//         if (list[i].mcMid == sessionId) {
//             output += "<button  style='color: wheat' onclick='mcCommentModify(" + list[i].mcCode + "," + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
//         } else {
//             output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg\' viewBox='0 0 24 24'><path d='M21.707,11.293l-8-8A.99991.99991,0,0,0,12,4V7.54492A11.01525,11.01525,0,0,0,2,18.5V20a1,1,0,0,0,1.78418.62061,11.45625,11.45625,0,0,1,7.88672-4.04932c.0498-.00635.1748-.01611.3291-.02588V20a.99991.99991,0,0,0,1.707.707l8-8A.99962.99962,0,0,0,21.707,11.293ZM14,17.58594V15.5a.99974.99974,0,0,0-1-1c-.25488,0-1.2959.04932-1.56152.085A14.00507,14.00507,0,0,0,4.05176,17.5332,9.01266,9.01266,0,0,1,13,9.5a.99974.99974,0,0,0,1-1V6.41406L19.58594,12Z'>Reply</path></svg></button>";
//         }
//         if (list[i].mcMid == sessionId || sessionId == 'admin') {
//             output += "<button  style='color: wheat' onclick = 'muCommentDelete(mcCode=" + list[i].mcCode + ",mcMuNum=" + list[i].mcMuNum + ")'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
//         } else {
//             output += "<button  disabled style='color: wheat'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M10.3,10.75A1,1,0,1,0,9,9.25,3,3,0,1,1,7,4,3,3,0,0,1,9.23,5H8A1,1,0,0,0,8,7h3a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0h0a5,5,0,1,0,.3,7.75ZM19,6H15a1,1,0,0,0,0,2h4a1,1,0,0,1,1,1v9.72l-1.57-1.45a1,1,0,0,0-.68-.27H9a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v1a3,3,0,0,0,3,3h8.36l3,2.73A1,1,0,0,0,21,22a1.1,1.1,0,0,0,.4-.08A1,1,0,0,0,22,21V9A3,3,0,0,0,19,6Z'>Delete</path></svg></button>";
//         }
//         output += "</div>";
//         output +="</div>"
//         output += "</br>"
//
//     }
//     var mucommentArea = document.getElementById('mucommentArea');
//     mucommentArea.innerHTML = output;
//
// }


function mcCommentModify(mcCode, mcMuNum) {
    var check = confirm('댓글을 수정하시겠습니까?');
    var mcContent = $('#mcContent').val();
    if (check) {

        $.ajax({
            type: "POST",
            url: "playList",
            data: {
                "plmuCode": muCode,
                "plMid": sessionId
            },
            dataType: "json",
            success: function (playListInsert) {

            },
            error: function () {
                console.log("에러에러!!")
            }
        });

    }
}

// function muCommentDelete(mcCode, mcMuNum) {
//     var check = confirm('댓글을 삭제하시겠습니까?');
//
//     $.ajax({
//         type: "POST",
//         url: "mcDelete",
//         data: {"mcCode": mcCode, "mcMuNum": mcMuNum},
//         dataType: "json",
//         success: function (list) {
//             commentList(list);
//         },
//         error: function () {
//             alert('삭제 실패');
//         }
//
//     });
// }
var audio = document.getElementById("audio"); //오디오 id 값으로 변수 지정

audio.addEventListener("play", playList); //변수 audio에 addEventListener 이벤트로 "play" 되었을 때 'playList' 함수 실행

function playList() {
    var sessionId = $("#mId").val();
    const muCode = document.getElementById('muCode').value; // 음악 코드 값

    $.ajax({
        type: "POST",
        url: "playList",
        data: {
            "plmuCode": muCode,
            "plMid": sessionId
        },
        dataType: "json",
        success: function (playListInsert) {

        },
        error: function () {
            console.log("에러에러!!")
        }

    });

    $("#modal_close_btn").click(function () {
        $("#modal").fadeOut();
    });
</script>
<!-- JS -->
<script src="js/jquery-3.5.1.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/smooth-scrollbar.js"></script>
<script src="js/select2.min.js"></script>
<script src="js/slider-radio.js"></script>
<script src="js/jquery.inputmask.min.js"></script>
<script src="js/plyr.min.js"></script>
<script src="js/main.js"></script>
</html>