<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- CSS -->
	<link rel="stylesheet" href="css/bootstrap-reboot.min.css">
	<link rel="stylesheet" href="css/bootstrap-grid.min.css">
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/magnific-popup.css">
	<link rel="stylesheet" href="css/select2.min.css">
	<link rel="stylesheet" href="css/paymentfont.min.css">
	<link rel="stylesheet" href="css/slider-radio.css">
	<link rel="stylesheet" href="css/plyr.css">
	<link rel="stylesheet" href="css/main.css">

	<!-- Favicons -->
	<link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32">
	<link rel="apple-touch-icon" href="icon/favicon-32x32.png">

	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="Dmitry Volkov">
	<title>Volna – Record label & Music streaming HTML Template</title>

	<style type="text/css">
		#downListArea1, #MyMusicArea{
			overflow: auto;
		}
		#downListArea1::-webkit-scrollbar, #MyMusicArea::-webkit-scrollbar{
			width: 4px;
		}
		#downListArea1::-webkit-scrollbar-track, #MyMusicArea::-webkit-scrollbar-track {
		  	background: #222227;
		}
		#downListArea1::-webkit-scrollbar-thumb, #MyMusicArea::-webkit-scrollbar-thumb {
		  	background-color: #0099FF;
		  	outline: 1px solid #222227;
		  	border-radius: 10px;
		}
		#select1{
		    background-color: #222227;
			border: 1px solid transparent;
			border-radius: 12px;
			height: 46px;
			position: relative;
			color: #fff;
			font-size: 16px;
			width: 100%;
			padding: 0 20px;
			font-family: 'Inter', sans-serif;
			text-align: center;
			padding-top: 10px;
			text-transform: uppercase;
		}
		
		.sign__group input[type="file"] {
			position: absolute;
			width: 1px;
			height: 1px;
			padding: 0;
			margin: -1px;
			overflow: hidden;
			clip:rect(0,0,0,0);
			border: 0;
		}
		
		.sign__group label:hover {
		    color: #fff;
  			background-color: #222227;
  			cursor: pointer;
		}
		
		.modiDelBtn h4 a img:hover{
			opacity:0.5;
			-webkit-transition: 0.5s;
		}
		
		#modal.modal-overlay {
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(1.5px);
            -webkit-backdrop-filter: blur(1.5px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            display: none;
            z-index: 1050;
        }
        #modal .modal-window {
            position: relative;
            box-shadow: 0 8px 32px 0 rgba(88, 88, 88, 0.37);
            backdrop-filter: blur( 13.5px );
			display: block;
			background-color: #16151a;
			margin: 40px auto;
			width: 100%;
			max-width: 420px;
			padding: 20px;
			border-radius: 12px;
			overflow: hidden;
        }
        #modal .title {
            padding-left: 10px;
            display: inline;
            text-shadow: 1px 1px 2px gray;
            color: white;
        }
        #modal .title h2 {
            display: inline;
        }
        #modal .close-area {
            display: inline;
            float: right;
            padding-right: 10px;
            cursor: pointer;
            text-shadow: 1px 1px 2px gray;
            color: white;
        }
        
        #modal .content {
            margin-top: 20px;
            padding: 0px 10px;
            text-shadow: 1px 1px 2px gray;
            color: white;
        }
	</style>

</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<body>
	<!-- modal -->
	<div id="container">
        <div id="lorem-ipsum"></div>
    </div>
    <div id="modal" class="modal-overlay" role="dialog">
        <div class="modal-window">
            <div class="title">
                <h2 id="modalTitle"></h2>
            </div>
            <div class="close-area">X</div>
            <div class="content" id="content">
            </div>
        </div>
    </div>
	<!-- end modal -->
	
	<!-- header -->
	<header th:replace="header.html :: header"></header>
	<!-- end header -->

	<!-- sidebar -->
	<aside th:replace="sidebar.html :: aside"></aside>
	<!-- end sidebar -->
	
	<!-- main content -->
	<main class="main">
		<div class="container-fluid">
			<div class="row row--grid">
				<!-- breadcrumb -->
				<div class="col-12">
					<ul class="breadcrumb">
						<li class="breadcrumb__item"><a href="/index">Home</a></li>
						<li class="breadcrumb__item breadcrumb__item--active">Profile</li>
					</ul>
				</div>
				<!-- end breadcrumb -->

				<!-- title -->
				<div class="col-12">
					<div class="main__title main__title--page">
						<h1>Profile</h1>
					</div>
				</div>
				<!-- end title -->
			</div>

			<div class="row row--grid">
				<div class="col-12">
					<div class="profile">
						<div class="profile__user">
							<div class="profile__avatar">
								<img th:src="@{/profile/{aa}(aa=${memView.mProfileName})}" alt="">
							</div>
							<div class="profile__meta" id="viewId" th:value="${memView.mId}">
								<h3 th:text="${memView.mName}"></h3>
							</div>
						</div>
						
						<!-- tabs nav -->
						<ul class="nav nav-tabs profile__tabs" id="profile__tabs" role="tablist">
							<li class="nav-item">
								<a class="nav-link active" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">프로필</a>
							</li>
							<th:block th:if="${session.login ne null}">
								<li th:if="${session.login.mId eq memView.mId}" class="nav-item">
									<a class="nav-link" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">구매목록</a>
								</li>
	
								<li th:if="${session.login.mId eq memView.mId}" class="nav-item">
									<a class="nav-link" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">다운로드 목록</a>
								</li>
	
								<li th:if="${session.login.mId eq memView.mId}" class="nav-item">
									<a class="nav-link" data-toggle="tab" href="#tab-4" role="tab" aria-controls="tab-4" aria-selected="false">정보수정</a>
								</li>
							</th:block>
						</ul>
						<!-- end tabs nav -->

					</div>

					<!-- content tabs -->
					<div class="tab-content">
						<div class="tab-pane fade show active" id="tab-1" role="tabpanel">
							<div class="row row--grid">
								<div class="col-12 col-lg-6 col-xl-3">
									<div class="stats">
										<span>팔로우</span>
					                    <p><a href="#"><span th:id="subList" th:text="${memCount}" th:value="${memCount}"></span></a></p>
					                    <th:block th:if="${session.login ne null}">
						                    <th:block th:if="${memView.mId ne session.login.mId}">
							                    <img src="/icon/like.png" style="width: 32px; position: absolute; bottom: 15px; right: 20px; cursor: pointer;" th:if="${subCheck eq 0}" id="subcheck" value="팔로우하기">
							                    <img src="/icon/dislike.png" style="width: 32px; position: absolute; bottom: 15px; right: 20px; cursor: pointer;" th:if="${subCheck eq 1}" id="subcheck" value="팔로우취소">
											</th:block>
										</th:block>
									</div>
								</div>

								<div class="col-12 col-lg-6 col-xl-3">
									<div class="stats">
										<span>팔로잉</span>
					                    <p><a href="#"><span th:id="suberList" th:text="${memCount1}" th:value="${memCount1}"></span></a></p>
					                    <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M6,11a1,1,0,1,0,1,1A1,1,0,0,0,6,11Zm12,0a1,1,0,1,0,1,1A1,1,0,0,0,18,11Zm2-6H4A3,3,0,0,0,1,8v8a3,3,0,0,0,3,3H20a3,3,0,0,0,3-3V8A3,3,0,0,0,20,5Zm1,11a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V8A1,1,0,0,1,4,7H20a1,1,0,0,1,1,1ZM12,9a3,3,0,1,0,3,3A3,3,0,0,0,12,9Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,12,13Z'/></svg>
					                </div>
								</div>

								<div class="col-12 col-lg-6 col-xl-3">
									<div class="stats">
										<span>게시글 수</span>
					                    <p><a href="#"><span th:id="board" th:text="${boaCount}" th:value="${boaCount}"></span></a></p>
					                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9,10a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V11A1,1,0,0,0,9,10Zm12,1a1,1,0,0,0,1-1V6a1,1,0,0,0-1-1H3A1,1,0,0,0,2,6v4a1,1,0,0,0,1,1,1,1,0,0,1,0,2,1,1,0,0,0-1,1v4a1,1,0,0,0,1,1H21a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1,1,1,0,0,1,0-2ZM20,9.18a3,3,0,0,0,0,5.64V17H10a1,1,0,0,0-2,0H4V14.82A3,3,0,0,0,4,9.18V7H8a1,1,0,0,0,2,0H20Z"/></svg>
					                </div>
								</div>

								<div class="col-12 col-lg-6 col-xl-3">
									<div class="stats">
										<span>트랙</span>
					                    <p><a href="#"><span th:id="muTrack" th:text="${muTrack}" th:value="${muTrack}"></span></a></p>
					                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z"/></svg>
					                </div>
								</div>
							</div>

							<div class="row row--grid">
								<!-- dashbox -->
								<div class="col-12 col-lg-6">
									<div class="dashbox">
										<div class="dashbox__title">
											<h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.05566,2h-14a3.00328,3.00328,0,0,0-3,3V19a3.00328,3.00328,0,0,0,3,3h14a3.00328,3.00328,0,0,0,3-3V5A3.00328,3.00328,0,0,0,19.05566,2Zm-14,2h14a1.001,1.001,0,0,1,1,1v8H17.59082a1.99687,1.99687,0,0,0-1.66406.89062L14.52051,16H9.59082L8.18457,13.89062A1.99687,1.99687,0,0,0,6.52051,13H4.05566V5A1.001,1.001,0,0,1,5.05566,4Zm14,16h-14a1.001,1.001,0,0,1-1-1V15H6.52051l1.40625,2.10938A1.99687,1.99687,0,0,0,9.59082,18h4.92969a1.99687,1.99687,0,0,0,1.66406-.89062L17.59082,15h2.46484v4A1.001,1.001,0,0,1,19.05566,20Z"/></svg>등록한 게시글 <span th:text="${boaCount}"></span></h3>

											<div class="dashbox__wrap">
												<a class="dashbox__refresh" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,0,0,5.12,4.77V3a1,1,0,0,0-2,0V7.5a1,1,0,0,0,1,1H8.62a1,1,0,0,0,0-2H6.22A8,8,0,1,1,4,12a1,1,0,0,0-2,0A10,10,0,1,0,12,2Zm0,6a1,1,0,0,0-1,1v3a1,1,0,0,0,1,1h2a1,1,0,0,0,0-2H13V9A1,1,0,0,0,12,8Z"/></svg></a>
											</div>
										</div>

										<div class="dashbox__list-wrap">
											<div class="dashbox__scroll">
											<div style="padding-top: 1%; padding-bottom: 1%" id="myBoardListArea">
											</div>
											</div>
										</div>
									</div>
								</div>
								<!-- end dashbox -->

								<!-- dashbox -->
								<div class="col-12 col-lg-6">
									<div class="dashbox">
										<div class="dashbox__title">
											<h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z"/></svg> 등록한 음악 <span th:text="${muTrack}"></span></h3>

											<div class="dashbox__wrap">
												<a class="dashbox__refresh" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,0,0,5.12,4.77V3a1,1,0,0,0-2,0V7.5a1,1,0,0,0,1,1H8.62a1,1,0,0,0,0-2H6.22A8,8,0,1,1,4,12a1,1,0,0,0-2,0A10,10,0,1,0,12,2Zm0,6a1,1,0,0,0-1,1v3a1,1,0,0,0,1,1h2a1,1,0,0,0,0-2H13V9A1,1,0,0,0,12,8Z"/></svg></a>
											</div>
										</div>

										<div class="dashbox__list-wrap">
											<div class="dashbox__scroll" id="MyMusicArea" style="padding-bottom: 2%; padding-top: 2%">
												<div class="scroll-content">
													<ul class="main__list main__list--dashbox" id="myMusicListArea">
											            <li class="single-item" style="padding-bottom: 5%; padding-top: 4%" >
											            </li>
											        </ul>
										        </div>
									        </div>
										</div>
									</div>
								</div>
								<!-- end dashbox -->
							</div>
						</div>
						
						<div class="tab-pane fade" id="tab-2" role="tabpanel">
							<div class="row row--grid" id="buyContentArea"></div>
							<div class="row row--grid">
								<div class="col-12">
									<div class="release">
										<div class="release__list" style="width: 120%;">
											<div class="scroll-content" id="buyListArea"></div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-pane fade" id="tab-3" role="tabpanel">
							<div class="row row--grid" id="downContentArea"></div>
							<div class="row row--grid">
								<div class="col-12">
									<div class="release">
										<div class="release__list" style="width: 120%;" id="downListArea1">
											<div class="scroll-content" id="downListArea"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						
						<th:block th:if="${session.login ne null}">
							<div class="tab-pane fade" id="tab-4" role="tabpanel">
							    <div class="row row--grid">
							        <!-- details form -->
							        <div class="col-12 col-lg-6">
							            <form action="#" class="sign__form sign__form--profile">
							                <div class="row">
							                    <div class="col-12">
							                        <h4 class="sign__title">내 정보</h4>
							                    </div>
							
							                    <div class="col-12 col-md-6 col-lg-12 col-xl-6">
							                        <div class="sign__group">
							                            <label class="sign__label" for="username">ID</label>
							                            <input id="username" type="text" name="mId" class="sign__input" th:value="${session.login.mId}" disabled>
							                        </div>
							                    </div>
							
							                    <div class="col-12 col-md-6 col-lg-12 col-xl-6">
							                        <div class="sign__group">
							                            <label class="sign__label" for="email">Email</label>
							                            <input id="email" type="email" name="mEmail" class="sign__input" th:value="${session.login.mEmail}" disabled>
							                        </div>
							                    </div>
							
							                    <div class="col-12 col-md-6 col-lg-12 col-xl-6">
							                        <div class="sign__group">
							                            <label class="sign__label" for="firstname">이름</label>
							                            <input id="firstname" type="text" name="mName" class="sign__input" th:value="${session.login.mName}" disabled>
							                        </div>
							                    </div>
							
							                    <div class="col-12 col-md-6 col-lg-12 col-xl-6">
							                        <div class="sign__group">
							                            <label class="sign__label" for="lastname">포인트</label>
							                            <input id="lastname" type="text" name="mPw" class="sign__input" th:value="${session.login.mPoint} + ' P'" disabled>
							                        </div>
							                    </div>
							                    
							                    <div class="col-12">
							                        <button class="sign__btn" th:href="@{memberDelete(mId=${session.login.mId})}">회원탈퇴</button>
							                    </div>
							                    
							                </div>
							            </form>
							        </div>
							        <!-- end details form -->
							
							        <!-- password form -->
							        <div class="col-12 col-lg-6">
							            <form action="memberModify"  class="sign__form sign__form--profile" method="post" enctype="multipart/form-data">
							                <div class="row">
							                    <div class="col-12">
							                        <h4 class="sign__title">정보 변경</h4>
							                    </div>
							                    
							                                                            
							                    <div class="col-12 col-md-6 col-lg-12 col-xl-6">
							                        <div class="sign__group">
							                            <label class="sign__label" for="oldpass">비밀번호</label>
							                            <input id="oldpass" type="password" name="mPw" class="sign__input" required>
							                        </div>
							                    </div>
							
							                    <div class="col-12 col-md-6 col-lg-12 col-xl-6">
							                        <div class="sign__group">
							                            <label class="sign__label" for="newpass">이름</label>
							                            <input id="newpass" type="text" name="mName" class="sign__input" required>
							                        </div>
							                    </div>
							
							                    <div class="col-12 col-md-6 col-lg-12 col-xl-6">
							                        <div class="sign__group">
							                            <label class="sign__label" for="confirmpass">이메일</label>
							                            <input id="confirmpass" type="text" name="mEmail" class="sign__input" required>
							                        </div>
							                    </div>
							
							                    <div class="col-12 col-md-6 col-lg-12 col-xl-6">
							                        <div class="sign__group">
							                            <label class="sign__label" for="select">프로필 사진</label>
							                            <input id="memModiFile" type="file" name="mProfile" class="sign__input">
							                            <label class="sign__label" id="select1" for="memModiFile">파일첨부</label>
							                        </div>
							                    </div>
							
							                    <div class="col-12">
							                        <input th:if="${session.login ne null}" type="hidden" th:value="${session.login.mId}" name="mId">
							                        <button class="sign__btn" type="submit" onclick="modify()">정보수정</button>
							                    </div>
							                </div>
							                
							            </form>
							        </div>
							        <!-- end password form -->
							    </div>
	
							</div>
						</th:block>
					</div>
					<!-- end content tabs -->
				</div>
			</div>	
		</div>
	</main>
	<!-- end main content -->

	<!-- footer -->
	<footer th:replace="footer.html :: footer"></footer>
	<!-- end footer -->

	<!-- modal top-up -->
	<form action="#" id="modal-topup" class="zoom-anim-dialog mfp-hide modal modal--form">
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">Replenishment</h4>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Your balance:</label>
			<span class="sign__value">$90.99</span>
		</div>

		<div class="sign__group sign__group--row">
			<label class="sign__label" for="value">Choose amount:</label>
			<select class="sign__select" name="value" id="value">
				<option value="50">$49</option>
				<option value="100">$99</option>
				<option value="200">$169</option>
			</select>

			<span class="sign__text sign__text--small">You can spend money from your account on the renewal of the connected packages, or on the purchase of goods on our website.</span>
		</div>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Payment method:</label>

			<ul class="sign__radio">
				<li>
					<input id="type1" type="radio" name="type" checked="">
					<label for="type1">Visa</label>
				</li>
				<li>
					<input id="type2" type="radio" name="type">
					<label for="type2">Mastercard</label>
				</li>
				<li>
					<input id="type3" type="radio" name="type">
					<label for="type3">Paypal</label>
				</li>
			</ul>
		</div>

		<button class="sign__btn" type="button">Proceed</button>
	</form>
	<!-- end modal top-up -->

	<!-- modal info -->
	<div id="modal-info" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13,16H7a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2ZM9,10h2a1,1,0,0,0,0-2H9a1,1,0,0,0,0,2Zm12,2H18V3a1,1,0,0,0-.5-.87,1,1,0,0,0-1,0l-3,1.72-3-1.72a1,1,0,0,0-1,0l-3,1.72-3-1.72a1,1,0,0,0-1,0A1,1,0,0,0,2,3V19a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V13A1,1,0,0,0,21,12ZM5,20a1,1,0,0,1-1-1V4.73L6,5.87a1.08,1.08,0,0,0,1,0l3-1.72,3,1.72a1.08,1.08,0,0,0,1,0l2-1.14V19a3,3,0,0,0,.18,1Zm15-1a1,1,0,0,1-2,0V14h2Zm-7-7H7a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Z"/></svg>
		</span>

		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">Receipt</h4>

		<div class="sign__group sign__group--row">
			<label class="sign__label" for="value">Total cost:</label>
			<span class="sign__value">$290.99</span>
		</div>

		<div class="sign__group sign__group--row">
			<label class="sign__label" for="value">Payment method: <b>Paypal</b></label>

			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->

	<!-- modal info -->
	<div id="modal-info2" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--green">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.72,8.79l-4.29,4.3L8.78,11.44a1,1,0,1,0-1.41,1.41l2.35,2.36a1,1,0,0,0,.71.29,1,1,0,0,0,.7-.29l5-5a1,1,0,0,0,0-1.42A1,1,0,0,0,14.72,8.79ZM12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"></path></svg>
		</span>
		
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">Payment #51 was successful!</h4>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Total cost:</label>
			<span class="sign__value">$18.00</span>
		</div>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Payment method: <b>Paypal</b></label>

			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->

	<!-- modal info -->
	<div id="modal-info3" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--red">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.71,8.29a1,1,0,0,0-1.42,0L12,10.59,9.71,8.29A1,1,0,0,0,8.29,9.71L10.59,12l-2.3,2.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L13.41,12l2.3-2.29A1,1,0,0,0,15.71,8.29Zm3.36-3.36A10,10,0,1,0,4.93,19.07,10,10,0,1,0,19.07,4.93ZM17.66,17.66A8,8,0,1,1,20,12,7.95,7.95,0,0,1,17.66,17.66Z"></path></svg>
		</span>
		
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">Payment #50 failed!</h4>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Total cost:</label>
			<span class="sign__value">$18.00</span>
		</div>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Payment method: <b>Paypal</b></label>

			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->

	<!-- modal info -->
	<div id="modal-info4" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,1,0,22,12,10.01114,10.01114,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.00917,8.00917,0,0,1,12,20Zm0-8.5a1,1,0,0,0-1,1v3a1,1,0,0,0,2,0v-3A1,1,0,0,0,12,11.5Zm0-4a1.25,1.25,0,1,0,1.25,1.25A1.25,1.25,0,0,0,12,7.5Z"></path></svg>
		</span>
		
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">Example of notification.</h4>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Amount to auto-renew:</label>
			<span class="sign__value">$18.00</span>
		</div>

		<div class="sign__group sign__group--row">
			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->

	<!-- modal info -->
	<div id="modal-info5" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--purple">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18,7h-.35A3.45,3.45,0,0,0,18,5.5a3.49,3.49,0,0,0-6-2.44A3.49,3.49,0,0,0,6,5.5,3.45,3.45,0,0,0,6.35,7H6a3,3,0,0,0-3,3v2a1,1,0,0,0,1,1H5v6a3,3,0,0,0,3,3h8a3,3,0,0,0,3-3V13h1a1,1,0,0,0,1-1V10A3,3,0,0,0,18,7ZM11,20H8a1,1,0,0,1-1-1V13h4Zm0-9H5V10A1,1,0,0,1,6,9h5Zm0-4H9.5A1.5,1.5,0,1,1,11,5.5Zm2-1.5A1.5,1.5,0,1,1,14.5,7H13ZM17,19a1,1,0,0,1-1,1H13V13h4Zm2-8H13V9h5a1,1,0,0,1,1,1Z"></path></svg>
		</span>
		
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">You have received a gift!</h4>

		<div class="sign__group sign__group--row">
			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>

			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->

	<!-- JS -->
	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/smooth-scrollbar.js"></script>
	<script src="js/select2.min.js"></script>
	<script src="js/slider-radio.js"></script>
	<script src="js/jquery.inputmask.min.js"></script>
	<script src="js/plyr.min.js"></script>
	<script src="js/main.js"></script>
</body>

<script th:if="${session.login ne null}" type="text/javascript" th:inline="javascript">

	var CheckLogin = [[${session.login}]]
	
	if(CheckLogin != null){
		var sessionId = [[${session.login.mId}]]
	}
	
	var viewMid = $("#viewId").attr("value");
	
	$(document).ready(function(){
		$.ajax({
			type : "POST",
			url : "buyList",
			data : {"psMid" : sessionId},
			dataType : "json",
			success : function(list){
				buy(list);
			},
			error : function(){
				console.log("실패");
			}
		});
		
		$.ajax({
			type : "POST",
			url : "MyMusicList",
			data : {"muSinger" : viewMid},
			dataType : "json",
			success : function(data){
				MyMusic(data);
			},
			error : function(){
				console.log("실패");
			}
		});
		
		$.ajax({
			type : "POST",
			url : "ajaxDownList",
			data : {"mudMid" : sessionId},
			dataType : "json",
			success : function(list){
				down(list);
			},
			error : function(){
				console.log("실패");
			}
		});
		
		$.ajax({
			type : "POST",
			url : "myBoardList",
			data : {"boWriter" : viewMid},
			dataType : "json",
			success : function(list){
				myBoard(list);
			},
			error : function(){
				console.log("실패");
			}
		});
		
		function myBoard(list){
			var output = "";
			
			for(var i in list){
				output += "<div style='padding-top: 4%; padding-bottom: 4%' id='myBoardListArea'>";
				output += "<div class='dashbox__note dashbox__note--succ'>";
				output += "<ul class='main__list main__list--dashbox'>";
				output += "<li class='single-item'>";
				output += "<img src='/ImageUpload/"+ list[i].boImage +"' style='width: 87px; height: 87px;'/>";
				output += "<div class='single-item__title'>";
				output += "<h4><a>"+list[i].boTitle+"</a></h4>";
				output += "<span>"+list[i].boContent+"</span>";
				output += "</div>";
				if(viewMid == sessionId){
					output += "<div style='position: absolute; right: 10px;' class='modiDelBtn'>";
					output += "<h4><a href='boardModiForm?boCode="+list[i].boCode+"'>[수정]</a> <a class='feedBoardDelete' id='"+list[i].boCode+"feedBoardNum' style='cursor : pointer;'><img src='/icon/boardDelete.png' style='width: 30px;'></a></h4></div>";
				}
				output += "</li></ul></div></div>";
			}
			var myBoardListArea = document.getElementById('myBoardListArea');
			myBoardListArea.innerHTML = output;
			
			$(".feedBoardDelete").click(function(){
				var feedBoardMuCode = $(this).attr('id');
				var boCodeDe = feedBoardMuCode.replace("feedBoardNum","");
				
				console.log(feedBoardMuCode);
				console.log(boCodeDe);
				
				$.ajax({
					type : "POST",
					url : "ajaxBoardDelete",
					data : {"boCode" : boCodeDe},
					dataType : "json",
					success : function(list){
						$.ajax({
							type : "POST",
							url : "myBoardList",
							data : {"boWriter" : viewMid},
							dataType : "json",
							success : function(list){
								myBoard(list);
							},
							error : function(){
								console.log("실패");
							}
						});
					},
					error: function(){
						console.log('실패');
					}
				});
			});
			
		}
		
		function MyMusic(data){
			var output = "";
			
			for(var i in data){
				(function(i){
					$.ajax({
						type: "POST",
						url: "CartInCheck",
						data: {"caMuCode" : data[i].muCode,
							   "caMid" : sessionId},
						dataType: "json",
						async: false,
						success: function(result){

							$.ajax({
								type: "POST",
								url: "PayInCheck",
								data: {"pMuCode": data[i].muCode,
									   "psMid": sessionId},
								dataType: "json",
								async: false,
								success: function(check){
									output += "<li class='single-item' style='padding-bottom: 5%; padding-top: 4%'>";
									output += "<a style='cursor : pointer;' name = "+i+" id='mplay' class='single-item__cover' value='"+data[i].mFile+","+data[i].muName+","+data[i].muSinger+","+data[i].muCode+","+data[i].muImage+"'>";
									output += "<img src='/muImage/"+data[i].muImage+"' style='width: 70px;'>";
									output += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M18.54,9,8.88,3.46a3.42,3.42,0,0,0-5.13,3V17.58A3.42,3.42,0,0,0,7.17,21a3.43,3.43,0,0,0,1.71-.46L18.54,15a3.42,3.42,0,0,0,0-5.92Zm-1,4.19L7.88,18.81a1.44,1.44,0,0,1-1.42,0,1.42,1.42,0,0,1-.71-1.23V6.42a1.42,1.42,0,0,1,.71-1.23A1.51,1.51,0,0,1,7.17,5a1.54,1.54,0,0,1,.71.19l9.66,5.58a1.42,1.42,0,0,1,0,2.46Z'/></svg>";
									output += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M16,2a3,3,0,0,0-3,3V19a3,3,0,0,0,6,0V5A3,3,0,0,0,16,2Zm1,17a1,1,0,0,1-2,0V5a1,1,0,0,1,2,0ZM8,2A3,3,0,0,0,5,5V19a3,3,0,0,0,6,0V5A3,3,0,0,0,8,2ZM9,19a1,1,0,0,1-2,0V5A1,1,0,0,1,9,5Z'/></svg></a>";
									
									output += "<div class='single-item__title'>";
									output += "<h4><a href='muView?muCode="+data[i].muCode+"&mId="+data[i].muSinger+"'>"+data[i].muName+"</a></h4>";
									output += "<span>"+data[i].muSinger+"</span></div>";
									
									if(check == ""){
										if(result == ""){
											output += "<a href='#' style='width:32px; height:32px;'>";
											output += "<img src='/img/cartCheck.png' style='width: 100%; opacity:0.8;' id='"+data[i].muCode+"' class='cartChange' value='check1'></a>";
											
										} else if(result != ""){
											output += "<a href='#' style='width:32px; height:32px;'>";
											output += "<img src='/img/cartDelete.png' style='width: 100%; opacity:0.8;' id='"+data[i].muCode+"' class='cartChange' value='check2'></a>";
											
										}
									} else if(check != ""){
										output += "<a href='/audio/"+data[i].mFile+"' download='"+data[i].mFile+"' class='single-item__export'>";
										output += "<svg class='selectMusicDownload' id='"+data[i].muCode+"download' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Zm-9.71,1.71a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l4-4a1,1,0,0,0-1.42-1.42L13,12.59V3a1,1,0,0,0-2,0v9.59l-2.29-2.3a1,1,0,1,0-1.42,1.42Z'/></svg></a>";
										
									}
									
									if(sessionId == data[i].muSinger){
										output += "<img src='/icon/boardDelete.png' style='width: 30px; cursor: pointer;' id='"+data[i].muCode+"myMusic' class='musicDelete'>";
										
										/* <div th:if="${memView.mId eq session.login.mId}" style="position: absolute; right: 10px;" class="modiDelBtn">
	                                	<a th:href="@{boardDelete(boCode=${bolist.boCode})}"><img src="/icon/boardDelete.png" style="width: 30px;"></a>
	                                </div> */
									}
									output += "</li>";
								},
								error: function(){
									console.log('실패');
								},
							});
						},
						error: function(){
							alert('장바구니에 담은 리스트 불러오기 실패');
						}
					});
				 })(i);
			}
			var myMusicListArea = document.getElementById('myMusicListArea');
			myMusicListArea.innerHTML = output;
			
			$(".single-item__cover").click(function(){
				
				  
				var aa = new Array();
				console.log(aa);
				
				var playlength = $(".single-item__cover").length;
				console.log("1"+playlength);
				
				var idx = $(this).attr('name');
				console.log(idx);
				
				for(var i=0; i < playlength; i++){
					aa[i] = i;

					if(idx == aa[i]){
						var aaa = idx;
					}
				}
				console.log(aa);
				console.log(aaa);
				
				
				$(".player").remove();
				var head= document.getElementsByTagName('html')[0];
				var script= document.createElement('script');
				var script1= document.createElement('script');
				var script2= document.createElement('script');
				var script3= document.createElement('script');
				var script4= document.createElement('script');
				var script5= document.createElement('script');
			
				script.src= 'js/owl.carousel.min.js';
				head.appendChild(script);
				
				script1.src= 'js/jquery.magnific-popup.min.js';
				head.appendChild(script1);
				
				script2.src= 'js/select2.min.js"';
				head.appendChild(script2);
				
				script3.src= 'js/jquery.inputmask.min.js';
				head.appendChild(script3);
			
				script4.src= 'js/plyr.min.js';
				head.appendChild(script4);
				
				script5.src= 'js/main.js';
				head.appendChild(script5);
			
				var mContent = $(this).attr('value');
				var array = mContent.split(",");
			    var mFile = array[0];
			    var muName = array[1]; 
			    var muSinger = array[2]; 
			    var muCode = array[3]; 		    
			    var muImage = array[4]; 
			    

		        $.ajax({
		            type: "POST",
		            url: "playList",
		            data: {
		                "plmuCode": muCode,
		                "plMid": sessionId
		            },
		            dataType: "json",
		            success: function (playListInsert) {

		            },
		            error: function () {
		                console.log("에러에러!!")
		            }
		        });
		
			    
				console.log(mFile);
				console.log(muName);
		
				 var output="<div class='player'>"
				output+="<div class='player__cover'>"
				output+="<img src='muImage/"+muImage+"' alt=''></div>";
				output+="<div class='player__content'>";
				output+="<span class='player__track'><b class='player__title'>"+muName+"</b>-<span class='player__artist'>"+muSinger+"</span></span>";
				output+="<audio src='/audio/"+mFile+"' id='audio' controls></audio></div></div>"
				output+="<button class='player__btn' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z'/></svg> Player</button>";
				
				var mplayArea= document.getElementsByTagName('body')[0];
				mplayArea.insertAdjacentHTML("afterend", output);
		
				/* var mplayArea=document.getElementById('mplayArea');
				mplayArea.innerHTML=output;  */
				audio.play();
				//.plyr__control--prev
				$(document).on('click','.plyr__control--next', function(e){ //동적으로 생성이되서 이벤트를 사용하지 못하여 document 추가
					
					aaa++;
					
					var idx2 = parseInt(aaa);
				
					console.log(idx2);
					
					var playlist1 = $('.single-item__cover')[idx2];
					console.log(playlist1);
					
					$(".player").remove();
					var head= document.getElementsByTagName('html')[0];
					var script= document.createElement('script');
					var script1= document.createElement('script');
					var script2= document.createElement('script');
					var script3= document.createElement('script');
					var script4= document.createElement('script');
					var script5= document.createElement('script');
				
					script.src= 'js/owl.carousel.min.js';
					head.appendChild(script);
					
					script1.src= 'js/jquery.magnific-popup.min.js';
					head.appendChild(script1);
					
					script2.src= 'js/select2.min.js"';
					head.appendChild(script2);
					
					script3.src= 'js/jquery.inputmask.min.js';
					head.appendChild(script3);
				
					script4.src= 'js/plyr.min.js';
					head.appendChild(script4);
					
					script5.src= 'js/main.js';
					head.appendChild(script5);
					
					var testtt = $(playlist1).attr('value');
					var array = testtt.split(",");
				    var mFile = array[0];
				    var muName = array[1]; 
				    var muSinger = array[2]; 
				    var muCode = array[3]; 		   
				    var muImage = array[4]; 
					

			        $.ajax({
			            type: "POST",
			            url: "playList",
			            data: {
			                "plmuCode": muCode,
			                "plMid": sessionId
			            },
			            dataType: "json",
			            success: function (playListInsert) {

			            },
			            error: function () {
			                console.log("에러에러!!")
			            }
			        });
			        
			
					var output1="<div class='player'>"
					output1+="<div class='player__cover'>"
					output1+="<img src='muImage/"+muImage+"' alt=''></div>";
					output1+="<div class='player__content'>";
					output1+="<span class='player__track'><b class='player__title'>"+muName+"</b>-<span class='player__artist'>"+muSinger+"</span></span>";
					output1+="<audio src='/audio/"+mFile+"' id='audio' controls></audio></div></div>"
					output1+="<button class='player__btn' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z'/></svg> Player</button>";
					
					var mplayArea= document.getElementsByTagName('body')[0];
					mplayArea.insertAdjacentHTML("afterend", output1);
					audio.play();
			
				     

				
				});
					$(document).on('click','.plyr__control--prev', function(e){ //동적으로 생성이되서 이벤트를 사용하지 못하여 document 추가
					
					aaa--;
					
					var idx2 = parseInt(aaa);
				
					console.log(idx2);
					
					var playlist1 = $('.single-item__cover')[idx2];
					console.log(playlist1);
					
					$(".player").remove();
					var head= document.getElementsByTagName('html')[0];
					var script= document.createElement('script');
					var script1= document.createElement('script');
					var script2= document.createElement('script');
					var script3= document.createElement('script');
					var script4= document.createElement('script');
					var script5= document.createElement('script');
				
					script.src= 'js/owl.carousel.min.js';
					head.appendChild(script);
					
					script1.src= 'js/jquery.magnific-popup.min.js';
					head.appendChild(script1);
					
					script2.src= 'js/select2.min.js"';
					head.appendChild(script2);
					
					script3.src= 'js/jquery.inputmask.min.js';
					head.appendChild(script3);
				
					script4.src= 'js/plyr.min.js';
					head.appendChild(script4);
					
					script5.src= 'js/main.js';
					head.appendChild(script5);
					
					var testtt = $(playlist1).attr('value');
					var array = testtt.split(",");
				    var mFile = array[0];
				    var muName = array[1]; 
				    var muSinger = array[2]; 
				    var muCode = array[3]; 		   
				    var muImage = array[4]; 
				    

			        $.ajax({
			            type: "POST",
			            url: "playList",
			            data: {
			                "plmuCode": muCode,
			                "plMid": sessionId
			            },
			            dataType: "json",
			            success: function (playListInsert) {

			            },
			            error: function () {
			                console.log("에러에러!!")
			            }
			        });
					
					
					var output1="<div class='player'>"
					output1+="<div class='player__cover'>"
					output1+="<img src='muImage/"+muImage+"' alt=''></div>";
					output1+="<div class='player__content'>";
					output1+="<span class='player__track'><b class='player__title'>"+muName+"</b>-<span class='player__artist'>"+muSinger+"</span></span>";
					output1+="<audio src='/audio/"+mFile+"' id='audio' controls></audio></div></div>"
					output1+="<button class='player__btn' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z'/></svg> Player</button>";
					
					var mplayArea= document.getElementsByTagName('body')[0];
					mplayArea.insertAdjacentHTML("afterend", output1);
					audio.play();
				});
			});
			
			$(".musicDelete").click(function(){
				var myMusicMuCode = $(this).attr('id');
				var muCodeDe = myMusicMuCode.replace("myMusic","");
				
				console.log(myMusicMuCode);
				console.log(muCodeDe);
				
				$.ajax({
					type : "POST",
					url : "ajaxMusicDelete",
					data : {"muCode" : muCodeDe},
					dataType : "json",
					success : function(list){
						$.ajax({
							type : "POST",
							url : "MyMusicList",
							data : {"muSinger" : viewMid},
							dataType : "json",
							success : function(data){
								MyMusic(data);
							},
							error : function(){
								console.log("실패");
							}
						});
					},
					error: function(){
						console.log('실패');
					}
				});
			});
			
			$(".cartChange").click(function(){
				
				var muCode = $(this).attr('id');
				console.log("muCode : "+muCode);
				
				var cartCheck = $(this).attr('value');
				
				if(cartCheck == "check1"){
					$.ajax({
						type : "POST",
						url : "cartListAdd",
						data : {"caMuCode" : muCode,
								"caMid" : sessionId
								},
						dataType : "json",
						success : function(list){
							CartAddSuccess(list);
							$.ajax({
								type : "POST",
								url : "ajaxCartList",
								data : {"caMid" : sessionId},
								dataType : "json",
								success : function(list){
									smallCart(list);
								},
								error : function(){
									console.log("장바구니 개수 출력 실패");
								}
							});
						},
						error : function(){
							alert('장바구니 추가 실패');
						}
					});
					
					function CartAddSuccess(list){
						
						var output = "";
						
						output += "<img src='/img/cartDelete.png' style='width: 100%;' id='"+list.muCode+"' class='cartChange' value='check2'></a>";
						
						var td22 = document.getElementById(muCode);
						console.log(td22);
						td22.innerHTML = output;
					}
					$(this).attr('src','/img/cartDelete.png');
					cartCheck = $(this).attr('value','check2');
					
				}else if(cartCheck == "check2"){
					$.ajax({
						type : "POST",
						url : "cartListDelete",
						data : {"caMuCode" : muCode,
								"caMid" : sessionId
								},
						dataType : "json",
						success : function(list){
							CartDeleteSuccess(list);
							$.ajax({
								type : "POST",
								url : "ajaxCartList",
								data : {"caMid" : sessionId},
								dataType : "json",
								success : function(list){
									smallCart(list);
								},
								error : function(){
									console.log("장바구니 개수 출력 실패");
								}
							});
						},
						error : function(){
							alert('장바구니 삭제 실패');
						}
					});
					function CartDeleteSuccess(list){
						
						var output = "";
						
						output += "<img src='/img/cartCheck.png' style='width: 100%;' id='"+list.muCode+"' class='cartChange' value='check1'></a>";
						
						var td22 = document.getElementById(muCode);
						console.log(td22);
						td22.innerHTML = output;
					}
					$(this).attr('src','/img/cartCheck.png');
					cartCheck = $(this).attr('value','check1');
				}
			});
			function smallCart(list){
				var cartCountArea = document.getElementById('cartCountArea');
				
				if(list.length <= 0){
					cartCountArea.innerHTML = "";
				} else{
					cartCountArea.innerHTML = list.length;
				}
				
				var output = "";
				
				if(list.length > 4){
					output += "<a href='/cartList' class='header__all'>Go to cart</a>";
					for(var i=0; i<4; i++){
						output += "<div class='header__product'>";
						output += "<img src='muImage/"+list[i].muImage+"' style='width: 50px; height: 50px; border-radius: 70%; overflow: hidden;'>";
						output += "<p><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></p>";
						output += "<span>"+list[i].muSinger+"</span>";
						output += "<button id='"+list[i].muCode+"' class='cartDelete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></div>";
					}
				}else if(list.length == 0){
					output += "<div class='header__product' style='padding-left:33px; padding-right:33px;'>";
					output += "<span>장바구니가 비어있습니다.</span></div>"
				}else{
					output += "<a href='/cartList' class='header__all'>Go to cart</a>";
					for(var i in list){
						output += "<div class='header__product'>";
						output += "<img src='muImage/"+list[i].muImage+"' style='width: 50px; height: 50px; border-radius: 70%; overflow: hidden;'>";
						output += "<p><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></p>";
						output += "<span>"+list[i].muSinger+"</span>";
						output += "<button id='"+list[i].muCode+"' class='cartDelete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></div>";
					}
				}
				
				
				var smallCartListArea = document.getElementById('smallCartListArea');
				smallCartListArea.innerHTML = output;
				
				$(".cartDelete").click(function(){
					
					var muCode = $(this).attr('id');
					console.log("muCode : "+muCode);
					
					$.ajax({
						type : "POST",
						url : "cartListDelete",
						data : {"caMuCode" : muCode,
								"caMid" : sessionId
								},
						dataType : "json",
						success : function(list){
							smallCart(list);
							
							$.ajax({
								type : "POST",
								url : "MyMusicList",
								data : {"muSinger" : viewMid},
								dataType : "json",
								success : function(data){
									MyMusic(data);
								},
								error : function(){
									console.log("실패");
								}
							});
						},
						error : function(){
							alert('장바구니 삭제 실패');
						}
					});
				});
			}
		}
		
		function buy(list){
			var output = "";
			var output1 = "";
			var buyTheNumber = list.length;
			
			if(buyTheNumber <= 0){
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span>총 구매개수</span>";
			    output1 += "<p><b name='price' value='"+buyTheNumber+"' id='totalPrice'>"+buyTheNumber+"곡</b></p>";
			    output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z'/></svg>";
			    output1 += "</div></div>";
			    
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span>총 결제금액</span>";
			    output1 += "<p><b name='price' value='"+buyTheNumber * 500+"' id='totalPrice'>"+buyTheNumber * 500+"원</b></p>";
			    output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M6,11a1,1,0,1,0,1,1A1,1,0,0,0,6,11Zm12,0a1,1,0,1,0,1,1A1,1,0,0,0,18,11Zm2-6H4A3,3,0,0,0,1,8v8a3,3,0,0,0,3,3H20a3,3,0,0,0,3-3V8A3,3,0,0,0,20,5Zm1,11a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V8A1,1,0,0,1,4,7H20a1,1,0,0,1,1,1ZM12,9a3,3,0,1,0,3,3A3,3,0,0,0,12,9Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,12,13Z'/></svg>";
			    output1 += "</div></div>";
			    
				output += "<table id='buyListTable' class='cart__table'>";
				output += "<thead>"
				output += "<tr>";
				output += "<th>구매하신 음악이 없습니다.<br/><a href='/allfileList' class='hero__btn hero__btn--green'>음원목록으로</a></th>";
				output += "</tr>";
				output += "</thead>"
			}	else{
				output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span>총 구매개수</span>";
			    output1 += "<p><b name='price' value='"+buyTheNumber+"' id='totalPrice'>"+buyTheNumber+"곡</b></p>";
			    output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z'/></svg>";
			    output1 += "</div></div>";
			    
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span>총 결제금액</span>";
			    output1 += "<p><b name='price' value='"+buyTheNumber * 500+"' id='totalPrice'>"+buyTheNumber * 500+"원</b></p>";
			    output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M6,11a1,1,0,1,0,1,1A1,1,0,0,0,6,11Zm12,0a1,1,0,1,0,1,1A1,1,0,0,0,18,11Zm2-6H4A3,3,0,0,0,1,8v8a3,3,0,0,0,3,3H20a3,3,0,0,0,3-3V8A3,3,0,0,0,20,5Zm1,11a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V8A1,1,0,0,1,4,7H20a1,1,0,0,1,1,1ZM12,9a3,3,0,1,0,3,3A3,3,0,0,0,12,9Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,12,13Z'/></svg>";
			    output1 += "</div></div>";
			    
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span><button type='button' style='color:#25a56a;' class='allMusicDownload'>구매목록 모두받기</button></span>";
			    output1 += "</div></div>";
			    
				output += "<table id='buyListTable' class='main__table'>";
				output += "<thead>"
				output += "<tr>";
				output += "<th>결제번호</th>";
				output += "<th>프로필</th>";
				output += "<th>제목</th>";
				output += "<th>가수</th>";
				output += "<th>좋아요수</th>";
				output += "<th>조회수</th>";
				output += "<th>구매일시</th>";
				output += "<th>다운로드</th>";
				output += "</tr>";
				output += "</thead>"
			}
			
			for(var i in list){
				output += "<tbody>"
				output += "<tr>";
				output += "<td><div class='main__table-text main__table-text--number'><a class='open-modal'>"+list[i].pCode+"</a></div></td>";
				output += "<td><div class='main__table-img'><img src='/muImage/"+list[i].muImage+"'></div></td>";
				output += "<td><div class='main__table-text'><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span>"+list[i].muName+"</span></a></div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muSinger+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muLike+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muHit+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].pDate+"</div></td>";
				output += "<td><a href='/audio/"+list[i].mFile+"' download='"+list[i].mFile+"' class='single-item__export' id='"+list[i].muCode+"download'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Zm-9.71,1.71a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l4-4a1,1,0,0,0-1.42-1.42L13,12.59V3a1,1,0,0,0-2,0v9.59l-2.29-2.3a1,1,0,1,0-1.42,1.42Z'/></svg></a></td>";
				output += "</tr>";
				output += "</tbody>"
	
			}
			output += "</table>";
			
			var buyListArea = document.getElementById('buyListArea');
			buyListArea.innerHTML = output;
			
			var buyContentArea = document.getElementById('buyContentArea');
			buyContentArea.innerHTML = output1;
			
			$(".allMusicDownload").click(function(){
				for(var i in list){
					var UserName = list[i].mFile;
					var filepath = "/audio/"+list[i].mFile;
					download(UserName,filepath);
				}
				
				function download(filename, filepath) {
					var element = document.createElement('a');
					element.setAttribute('href',filepath);
					element.setAttribute('download', filename);
					document.body.appendChild(element);
					element.click();
					document.body.removeChild(element);
				}
			});
			
			$(".single-item__export").click(function(){
				
				var selectDownloadMusicCode = $(this).attr("id");
				console.log(selectDownloadMusicCode);
				console.log(sessionId);
				
				var selectMusicCode = selectDownloadMusicCode.replace("download","");
				console.log(selectMusicCode);
				
				$.ajax({
					type: "POST",
					url: "downloadTableInsert",
					data: {"mudMuCode": selectMusicCode,
						   "mudMid": sessionId},
					dataType: "json",
					success : function(list){
					},
					error : function(){
						console.log('다운로드 테이블 등록 실패');
					}
				});
			});
			
			$(".selectMusicDownload").click(function(){
				
				var selectDownloadMusicCode = $(this).attr("id");
				console.log(selectDownloadMusicCode);
				console.log(sessionId);
				
				var selectMusicCode = selectDownloadMusicCode.replace("download","");
				console.log(selectMusicCode);
				
				$.ajax({
					type: "POST",
					url: "downloadTableInsert",
					data: {"mudMuCode": selectMusicCode,
						   "mudMid": sessionId},
					dataType: "json",
					success : function(list){
					},
					error : function(){
						console.log('다운로드 테이블 등록 실패');
					}
				});
			});
		}
		
		function down(list){
			var output = "";
			var output1 = "";
			var downTheNumber = list.length;
			
			if(downTheNumber <= 0){
				output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
				output1 += "<span>다운목록</span>";
				output1 += "<p><b name='price' value='"+downTheNumber+"' id='totalPrice'>"+downTheNumber+"곡</b></p>";
				output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z'/></svg>";
				output1 += "</div></div>";
				
			    output += "<table id='downTable' class='cart__table'>";
				output += "<thead>"
				output += "<tr>";
				output += "<th>다운로드한 음악이 없습니다.<br/><a href='/allfileList' class='hero__btn hero__btn--green'>음원목록으로</a></th>";
				output += "</tr>";
				output += "</thead>";
			} else{
				output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
				output1 += "<span>다운목록</span>";
				output1 += "<p><b name='price' value='"+downTheNumber+"' id='totalPrice'>"+downTheNumber+"곡</b></p>";
				output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z'/></svg>";
				output1 += "</div></div>";
			    
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span><button type='button' style='color:#25a56a;' class='allMusicDownload'>전체목록 다시받기</button></span>";
			    output1 += "</div></div>";
				
			    output += "<table id='downTable' class='main__table'>";
				output += "<thead>"
				output += "<tr>";
				output += "<th>번호</th>";
				output += "<th>프로필</th>";
				output += "<th>제목</th>";
				output += "<th>가수</th>";
				output += "<th>좋아요수</th>";
				output += "<th>조회수</th>";
				output += "<th>구매일시</th>";
				output += "<th>다운일시</th>";
				output += "<th>다운로드</th>";
				output += "</tr>";
				output += "</thead>";
			}
			
			for(var i in list){
				output += "<tbody>"
				output += "<tr>";
				output += "<td><div class='main__table-text main__table-text--number'><a class='open-modal'>"+(parseInt(i)+1)+"</a></div></td>";
				output += "<td><div class='main__table-img'><img src='/muImage/"+list[i].muImage+"'></div></td>";
				output += "<td><div class='main__table-text'><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span>"+list[i].muName+"</span></a></div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muSinger+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muLike+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muHit+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].pDate+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].mudDate+"</div></td>";
				output += "<td><a href='/audio/"+list[i].mFile+"' download='"+list[i].mFile+"' class='single-item__export' id='"+list[i].muCode+"download'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Zm-9.71,1.71a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l4-4a1,1,0,0,0-1.42-1.42L13,12.59V3a1,1,0,0,0-2,0v9.59l-2.29-2.3a1,1,0,1,0-1.42,1.42Z'/></svg></a></td>";
				output += "</tr>";
				output += "</tbody>";
			}
			output += "</table>";
			
			var downListArea = document.getElementById('downListArea');
			downListArea.innerHTML = output;
			
			var downContentArea = document.getElementById('downContentArea');
			downContentArea.innerHTML = output1;
			
			$(".allMusicDownload").click(function(){
				for(var i in list){
					var UserName = list[i].mFile;
					var filepath = "/audio/"+list[i].mFile;
					download(UserName,filepath);
				}
				
				function download(filename, filepath) {
					var element = document.createElement('a');
					element.setAttribute('href',filepath);
					element.setAttribute('download', filename);
					document.body.appendChild(element);
					element.click();
					document.body.removeChild(element);
				}
			});
			
			$(".selectMusicDownload").click(function(){
				
				var selectDownloadMusicCode = $(this).attr("id");
				console.log(selectDownloadMusicCode);
				console.log(sessionId);
				
				var selectMusicCode = selectDownloadMusicCode.replace("download","");
				console.log(selectMusicCode);
				
				$.ajax({
					type: "POST",
					url: "downloadTableInsert",
					data: {"mudMuCode": selectMusicCode,
						   "mudMid": sessionId},
					dataType: "json",
					success : function(list){
					},
					error : function(){
						console.log('다운로드 테이블 등록 실패');
					}
				});
			});
		}
	});

	$("#subcheck").click(function() {
		   
		   var ssMid = sessionId;
		   var sserMid = $("#viewId").attr("value");
		   console.log('로그인 아이디 : ' + ssMid);
		   console.log('구독당한 아이디 : ' + sserMid);
		   
		   if($(this).attr('value') == "팔로우하기"){
		       $.ajax({
		            type: "POST",
		            url: "subreg",
		            data: {
		                "ssMid": ssMid ,
		                "sserMid": sserMid
		            },
		            dataType: "json",
		            success: function (subr) {
			            $("#subList").empty().append(subr);
			            $("#subcheck").attr('value','팔로우취소');
		            },
		            error: function () {
		                alert('파이팅!!');
		            }
		        }); 
		       $(this).attr('src','/icon/dislike.png');
		   }else{
		        $.ajax({
		            type: "POST",
		            url: "subcancel",
		            data: {
		                "ssMid": ssMid ,
		                "sserMid": sserMid
		            },
		            dataType: "json",
		            success: function (subr) {
			            $("#subList").empty().append(subr);
			            $("#subcheck").attr('value','팔로우하기');
		            },
		            error: function () {
		                alert('파이팅!!');
		            }
		        }); 
		        $(this).attr('src','/icon/like.png');
		   }
		});
	
		$("#subList").click(function(){
			  console.log("모달되냐?");
			  var sserMid = $("#viewId").attr("value");
			  $("#modal").fadeIn();
			  
			  console.log(sserMid);
			  $.ajax({
				  type : "POST",
				  url : "submodalList",
				  data : {"sserMid" : sserMid},
				  dataType: "json",
		          success: function (subr) {
		        	  
		        	var output = "";
		        	var output1 = "구독자";
		        	
		        	for(var i in subr){
		        		if(subr == ""){
		        			output += "<p>구독을 눌러보세요<p>"
		        		}else if(subr.length > 0){
		        			output += "<p><img src='/profile/"+ subr[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'> &nbsp;&nbsp;<a href='boardWriterView?boWriter="+ subr[i].mId +"&mId="+sessionId+"'>"+subr[i].mId+"</a></p>"
		        		}
		        	}
		        	const modalContent = document.getElementById("content");
					modalContent.innerHTML = output;
					
					var modalTitle = document.getElementById("modalTitle");
					modalTitle.innerHTML = output1;
					
					const modal = document.getElementById("modal")
					
					modal.style.display = "flex";
					
					const closeBtn = modal.querySelector(".close-area")
					closeBtn.addEventListener("click", e => {
						modal.style.display = "none"
					});	
					
					modal.addEventListener("click", e => {
					    const evTarget = e.target
					    if(evTarget.classList.contains("modal-overlay")) {
					        modal.style.display = "none"
					    }
					});
					
					window.addEventListener("keyup", e => {
					    if(modal.style.display === "flex" && e.key === "Escape") {
					        modal.style.display = "none"
					    }
					});
					
					console.log(subr);
		          },
		          error : function(){
		        	  alert('구독자 목록 불러오기 실패');
		          }
			  });
			  
		});
			  $("#suberList").click(function(){
				  console.log("모달되냐?");
				  var ssMid = $("#viewId").attr("value");
				  $("#modal").fadeIn();
				  
				  console.log(ssMid);
				  $.ajax({
					  type : "POST",
					  url : "subermodalList",
					  data : {"ssMid" : ssMid},
					  dataType: "json",
			          success: function (subr) {
			        	  
			        	var output = "";
			        	var output1 = "구독한 목록";
			        	for(var i in subr){
			        		if(subr == ""){
			        			output += "<p>구독한 사람이 없습니다.<p>"
			        		}else if(subr.length > 0){
			        			output += "<p><img src='/profile/"+ subr[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'> &nbsp;&nbsp;<a href='boardWriterView?boWriter="+ subr[i].mId +"&mId="+sessionId+"'>"+subr[i].mId+"</a></p>"
			        		}
			        	}
			        	const modalContent = document.getElementById("content");
						modalContent.innerHTML = output;
						
						var modalTitle = document.getElementById("modalTitle");
						modalTitle.innerHTML = output1;
						
						const modal = document.getElementById("modal")
						
						modal.style.display = "flex";
						
						const closeBtn = modal.querySelector(".close-area")
						closeBtn.addEventListener("click", e => {
							modal.style.display = "none"
						});	
						
						modal.addEventListener("click", e => {
						    const evTarget = e.target
						    if(evTarget.classList.contains("modal-overlay")) {
						        modal.style.display = "none"
						    }
						});
						
						window.addEventListener("keyup", e => {
						    if(modal.style.display === "flex" && e.key === "Escape") {
						        modal.style.display = "none"
						    }
						});
						
						console.log(subr);
			          },
			          error : function(){
			        	  alert('구독자 목록 불러오기 실패');
			          }
				  });
				  
		});
	
	$("#modal_close_btn").click(function () {
	    $("#modal").fadeOut();
	});

	function modify(){
		alert("정보가 수정되었습니다.")
	}
	
	$(".dashbox__refresh").click(function(){
		location.reload();
	});
	
</script>
	
<script th:if="${session.login eq null}" type="text/javascript" th:inline="javascript">
	var sessionId = "nullId";
	
	var viewMid = $("#viewId").attr("value");
	
	$(document).ready(function(){
		$.ajax({
			type : "POST",
			url : "buyList",
			data : {"psMid" : sessionId},
			dataType : "json",
			success : function(list){
				buy(list);
			},
			error : function(){
				console.log("실패");
			}
		});
		
		$.ajax({
			type : "POST",
			url : "MyMusicList",
			data : {"muSinger" : viewMid},
			dataType : "json",
			success : function(data){
				MyMusic(data);
			},
			error : function(){
				console.log("실패");
			}
		});
		
		$.ajax({
			type : "POST",
			url : "ajaxDownList",
			data : {"mudMid" : sessionId},
			dataType : "json",
			success : function(list){
				down(list);
			},
			error : function(){
				console.log("실패");
			}
		});
		
		$.ajax({
			type : "POST",
			url : "myBoardList",
			data : {"boWriter" : viewMid},
			dataType : "json",
			success : function(list){
				myBoard(list);
			},
			error : function(){
				console.log("실패");
			}
		});
		
		function myBoard(list){
			var output = "";
			
			for(var i in list){
				output += "<div style='padding-top: 4%; padding-bottom: 4%' id='myBoardListArea'>";
				output += "<div class='dashbox__note dashbox__note--succ'>";
				output += "<ul class='main__list main__list--dashbox'>";
				output += "<li class='single-item'>";
				output += "<img src='/ImageUpload/"+ list[i].boImage +"' style='width: 87px; height: 87px;'/>";
				output += "<div class='single-item__title'>";
				output += "<h4><a>"+list[i].boTitle+"</a></h4>";
				output += "<span>"+list[i].boContent+"</span>";
				output += "</div>";
				if(viewMid == sessionId){
					output += "<div style='position: absolute; right: 10px;' class='modiDelBtn'>";
					output += "<h4><a href='boardModiForm?boCode="+list[i].boCode+"'>[수정]</a> <a class='feedBoardDelete' id='"+list[i].boCode+"feedBoardNum' style='cursor : pointer;'><img src='/icon/boardDelete.png' style='width: 30px;'></a></h4></div>";
				}
				output += "</li></ul></div></div>";
			}
			var myBoardListArea = document.getElementById('myBoardListArea');
			myBoardListArea.innerHTML = output;
			
			$(".feedBoardDelete").click(function(){
				var feedBoardMuCode = $(this).attr('id');
				var boCodeDe = feedBoardMuCode.replace("feedBoardNum","");
				
				console.log(feedBoardMuCode);
				console.log(boCodeDe);
				
				$.ajax({
					type : "POST",
					url : "ajaxBoardDelete",
					data : {"boCode" : boCodeDe},
					dataType : "json",
					success : function(list){
						$.ajax({
							type : "POST",
							url : "myBoardList",
							data : {"boWriter" : viewMid},
							dataType : "json",
							success : function(list){
								myBoard(list);
							},
							error : function(){
								console.log("실패");
							}
						});
					},
					error: function(){
						console.log('실패');
					}
				});
			});
			
		}
		
		function MyMusic(data){
			var output = "";
			
			for(var i in data){
				(function(i){
					$.ajax({
						type: "POST",
						url: "CartInCheck",
						data: {"caMuCode" : data[i].muCode,
							   "caMid" : sessionId},
						dataType: "json",
						async: false,
						success: function(result){

							$.ajax({
								type: "POST",
								url: "PayInCheck",
								data: {"pMuCode": data[i].muCode,
									   "psMid": sessionId},
								dataType: "json",
								async: false,
								success: function(check){
									output += "<li class='single-item' style='padding-bottom: 5%; padding-top: 4%'>";
									output += "<a style='cursor : pointer;' name = "+i+" id='mplay' class='single-item__cover' value='"+data[i].mFile+","+data[i].muName+","+data[i].muSinger+","+data[i].muCode+","+data[i].muImage+"'>";
									output += "<img src='/muImage/"+data[i].muImage+"' style='width: 70px;'>";
									output += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M18.54,9,8.88,3.46a3.42,3.42,0,0,0-5.13,3V17.58A3.42,3.42,0,0,0,7.17,21a3.43,3.43,0,0,0,1.71-.46L18.54,15a3.42,3.42,0,0,0,0-5.92Zm-1,4.19L7.88,18.81a1.44,1.44,0,0,1-1.42,0,1.42,1.42,0,0,1-.71-1.23V6.42a1.42,1.42,0,0,1,.71-1.23A1.51,1.51,0,0,1,7.17,5a1.54,1.54,0,0,1,.71.19l9.66,5.58a1.42,1.42,0,0,1,0,2.46Z'/></svg>";
									output += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M16,2a3,3,0,0,0-3,3V19a3,3,0,0,0,6,0V5A3,3,0,0,0,16,2Zm1,17a1,1,0,0,1-2,0V5a1,1,0,0,1,2,0ZM8,2A3,3,0,0,0,5,5V19a3,3,0,0,0,6,0V5A3,3,0,0,0,8,2ZM9,19a1,1,0,0,1-2,0V5A1,1,0,0,1,9,5Z'/></svg></a>";
									
									output += "<div class='single-item__title'>";
									output += "<h4><a href='muView?muCode="+data[i].muCode+"&mId="+data[i].muSinger+"'>"+data[i].muName+"</a></h4>";
									output += "<span>"+data[i].muSinger+"</span></div>";
									
									if(check == ""){
										if(result == ""){
											output += "<a href='#' style='width:32px; height:32px;'>";
											output += "<img src='/img/cartCheck.png' style='width: 100%; opacity:0.8;' id='"+data[i].muCode+"' class='cartChange' value='check1'></a>";
											
										} else if(result != ""){
											output += "<a href='#' style='width:32px; height:32px;'>";
											output += "<img src='/img/cartDelete.png' style='width: 100%; opacity:0.8;' id='"+data[i].muCode+"' class='cartChange' value='check2'></a>";
											
										}
									} else if(check != ""){
										output += "<a href='/audio/"+data[i].mFile+"' download='"+data[i].mFile+"' class='single-item__export'>";
										output += "<svg class='selectMusicDownload' id='"+data[i].muCode+"download' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Zm-9.71,1.71a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l4-4a1,1,0,0,0-1.42-1.42L13,12.59V3a1,1,0,0,0-2,0v9.59l-2.29-2.3a1,1,0,1,0-1.42,1.42Z'/></svg></a>";
										
									}
									
									if(sessionId == data[i].muSinger){
										output += "<img src='/icon/boardDelete.png' style='width: 30px; cursor: pointer;' id='"+data[i].muCode+"myMusic' class='musicDelete'>";
										
										/* <div th:if="${memView.mId eq session.login.mId}" style="position: absolute; right: 10px;" class="modiDelBtn">
	                                	<a th:href="@{boardDelete(boCode=${bolist.boCode})}"><img src="/icon/boardDelete.png" style="width: 30px;"></a>
	                                </div> */
									}
									output += "</li>";
								},
								error: function(){
									console.log('실패');
								},
							});
						},
						error: function(){
							alert('장바구니에 담은 리스트 불러오기 실패');
						}
					});
				 })(i);
			}
			var myMusicListArea = document.getElementById('myMusicListArea');
			myMusicListArea.innerHTML = output;
			
			$(".single-item__cover").click(function(){
				
				  
				var aa = new Array();
				console.log(aa);
				
				var playlength = $(".single-item__cover").length;
				console.log("1"+playlength);
				
				var idx = $(this).attr('name');
				console.log(idx);
				
				for(var i=0; i < playlength; i++){
					aa[i] = i;

					if(idx == aa[i]){
						var aaa = idx;
					}
				}
				console.log(aa);
				console.log(aaa);
				
				
				$(".player").remove();
				var head= document.getElementsByTagName('html')[0];
				var script= document.createElement('script');
				var script1= document.createElement('script');
				var script2= document.createElement('script');
				var script3= document.createElement('script');
				var script4= document.createElement('script');
				var script5= document.createElement('script');
			
				script.src= 'js/owl.carousel.min.js';
				head.appendChild(script);
				
				script1.src= 'js/jquery.magnific-popup.min.js';
				head.appendChild(script1);
				
				script2.src= 'js/select2.min.js"';
				head.appendChild(script2);
				
				script3.src= 'js/jquery.inputmask.min.js';
				head.appendChild(script3);
			
				script4.src= 'js/plyr.min.js';
				head.appendChild(script4);
				
				script5.src= 'js/main.js';
				head.appendChild(script5);
			
				var mContent = $(this).attr('value');
				var array = mContent.split(",");
			    var mFile = array[0];
			    var muName = array[1]; 
			    var muSinger = array[2]; 
			    var muCode = array[3]; 		    
			    var muImage = array[4]; 
			    

		        $.ajax({
		            type: "POST",
		            url: "playList",
		            data: {
		                "plmuCode": muCode,
		                "plMid": sessionId
		            },
		            dataType: "json",
		            success: function (playListInsert) {

		            },
		            error: function () {
		                console.log("에러에러!!")
		            }
		        });
		
			    
				console.log(mFile);
				console.log(muName);
		
				 var output="<div class='player'>"
				output+="<div class='player__cover'>"
				output+="<img src='muImage/"+muImage+"' alt=''></div>";
				output+="<div class='player__content'>";
				output+="<span class='player__track'><b class='player__title'>"+muName+"</b>-<span class='player__artist'>"+muSinger+"</span></span>";
				output+="<audio src='/audio/"+mFile+"' id='audio' controls></audio></div></div>"
				output+="<button class='player__btn' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z'/></svg> Player</button>";
				
				var mplayArea= document.getElementsByTagName('body')[0];
				mplayArea.insertAdjacentHTML("afterend", output);
		
				/* var mplayArea=document.getElementById('mplayArea');
				mplayArea.innerHTML=output;  */
				audio.play();
				//.plyr__control--prev
				$(document).on('click','.plyr__control--next', function(e){ //동적으로 생성이되서 이벤트를 사용하지 못하여 document 추가
					
					aaa++;
					
					var idx2 = parseInt(aaa);
				
					console.log(idx2);
					
					var playlist1 = $('.single-item__cover')[idx2];
					console.log(playlist1);
					
					$(".player").remove();
					var head= document.getElementsByTagName('html')[0];
					var script= document.createElement('script');
					var script1= document.createElement('script');
					var script2= document.createElement('script');
					var script3= document.createElement('script');
					var script4= document.createElement('script');
					var script5= document.createElement('script');
				
					script.src= 'js/owl.carousel.min.js';
					head.appendChild(script);
					
					script1.src= 'js/jquery.magnific-popup.min.js';
					head.appendChild(script1);
					
					script2.src= 'js/select2.min.js"';
					head.appendChild(script2);
					
					script3.src= 'js/jquery.inputmask.min.js';
					head.appendChild(script3);
				
					script4.src= 'js/plyr.min.js';
					head.appendChild(script4);
					
					script5.src= 'js/main.js';
					head.appendChild(script5);
					
					var testtt = $(playlist1).attr('value');
					var array = testtt.split(",");
				    var mFile = array[0];
				    var muName = array[1]; 
				    var muSinger = array[2]; 
				    var muCode = array[3]; 		   
				    var muImage = array[4]; 
					

			        $.ajax({
			            type: "POST",
			            url: "playList",
			            data: {
			                "plmuCode": muCode,
			                "plMid": sessionId
			            },
			            dataType: "json",
			            success: function (playListInsert) {

			            },
			            error: function () {
			                console.log("에러에러!!")
			            }
			        });
			        
			
					var output1="<div class='player'>"
					output1+="<div class='player__cover'>"
					output1+="<img src='muImage/"+muImage+"' alt=''></div>";
					output1+="<div class='player__content'>";
					output1+="<span class='player__track'><b class='player__title'>"+muName+"</b>-<span class='player__artist'>"+muSinger+"</span></span>";
					output1+="<audio src='/audio/"+mFile+"' id='audio' controls></audio></div></div>"
					output1+="<button class='player__btn' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z'/></svg> Player</button>";
					
					var mplayArea= document.getElementsByTagName('body')[0];
					mplayArea.insertAdjacentHTML("afterend", output1);
					audio.play();
			
				     

				
				});
					$(document).on('click','.plyr__control--prev', function(e){ //동적으로 생성이되서 이벤트를 사용하지 못하여 document 추가
					
					aaa--;
					
					var idx2 = parseInt(aaa);
				
					console.log(idx2);
					
					var playlist1 = $('.single-item__cover')[idx2];
					console.log(playlist1);
					
					$(".player").remove();
					var head= document.getElementsByTagName('html')[0];
					var script= document.createElement('script');
					var script1= document.createElement('script');
					var script2= document.createElement('script');
					var script3= document.createElement('script');
					var script4= document.createElement('script');
					var script5= document.createElement('script');
				
					script.src= 'js/owl.carousel.min.js';
					head.appendChild(script);
					
					script1.src= 'js/jquery.magnific-popup.min.js';
					head.appendChild(script1);
					
					script2.src= 'js/select2.min.js"';
					head.appendChild(script2);
					
					script3.src= 'js/jquery.inputmask.min.js';
					head.appendChild(script3);
				
					script4.src= 'js/plyr.min.js';
					head.appendChild(script4);
					
					script5.src= 'js/main.js';
					head.appendChild(script5);
					
					var testtt = $(playlist1).attr('value');
					var array = testtt.split(",");
				    var mFile = array[0];
				    var muName = array[1]; 
				    var muSinger = array[2]; 
				    var muCode = array[3]; 		   
				    var muImage = array[4]; 
				    

			        $.ajax({
			            type: "POST",
			            url: "playList",
			            data: {
			                "plmuCode": muCode,
			                "plMid": sessionId
			            },
			            dataType: "json",
			            success: function (playListInsert) {

			            },
			            error: function () {
			                console.log("에러에러!!")
			            }
			        });
					
					
					var output1="<div class='player'>"
					output1+="<div class='player__cover'>"
					output1+="<img src='muImage/"+muImage+"' alt=''></div>";
					output1+="<div class='player__content'>";
					output1+="<span class='player__track'><b class='player__title'>"+muName+"</b>-<span class='player__artist'>"+muSinger+"</span></span>";
					output1+="<audio src='/audio/"+mFile+"' id='audio' controls></audio></div></div>"
					output1+="<button class='player__btn' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z'/></svg> Player</button>";
					
					var mplayArea= document.getElementsByTagName('body')[0];
					mplayArea.insertAdjacentHTML("afterend", output1);
					audio.play();
				});
			});
			
			$(".musicDelete").click(function(){
				var myMusicMuCode = $(this).attr('id');
				var muCodeDe = myMusicMuCode.replace("myMusic","");
				
				console.log(myMusicMuCode);
				console.log(muCodeDe);
				
				$.ajax({
					type : "POST",
					url : "ajaxMusicDelete",
					data : {"muCode" : muCodeDe},
					dataType : "json",
					success : function(list){
						$.ajax({
							type : "POST",
							url : "MyMusicList",
							data : {"muSinger" : viewMid},
							dataType : "json",
							success : function(data){
								MyMusic(data);
							},
							error : function(){
								console.log("실패");
							}
						});
					},
					error: function(){
						console.log('실패');
					}
				});
			});
			
			$(".cartChange").click(function(){
				
				if(sessionId == 'nullId'){
					alert('로그인 후 이용 가능합니다.');
				}else{
					var muCode = $(this).attr('id');
					console.log("muCode : "+muCode);
					
					var cartCheck = $(this).attr('value');
					
					if(cartCheck == "check1"){
						$.ajax({
							type : "POST",
							url : "cartListAdd",
							data : {"caMuCode" : muCode,
									"caMid" : sessionId
									},
							dataType : "json",
							success : function(list){
								CartAddSuccess(list);
								$.ajax({
									type : "POST",
									url : "ajaxCartList",
									data : {"caMid" : sessionId},
									dataType : "json",
									success : function(list){
										smallCart(list);
									},
									error : function(){
										console.log("장바구니 개수 출력 실패");
									}
								});
							},
							error : function(){
								alert('장바구니 추가 실패');
							}
						});
						
						function CartAddSuccess(list){
							
							var output = "";
							
							output += "<img src='/img/cartDelete.png' style='width: 100%;' id='"+list.muCode+"' class='cartChange' value='check2'></a>";
							
							var td22 = document.getElementById(muCode);
							console.log(td22);
							td22.innerHTML = output;
						}
						$(this).attr('src','/img/cartDelete.png');
						cartCheck = $(this).attr('value','check2');
						
					}else if(cartCheck == "check2"){
						$.ajax({
							type : "POST",
							url : "cartListDelete",
							data : {"caMuCode" : muCode,
									"caMid" : sessionId
									},
							dataType : "json",
							success : function(list){
								CartDeleteSuccess(list);
								$.ajax({
									type : "POST",
									url : "ajaxCartList",
									data : {"caMid" : sessionId},
									dataType : "json",
									success : function(list){
										smallCart(list);
									},
									error : function(){
										console.log("장바구니 개수 출력 실패");
									}
								});
							},
							error : function(){
								alert('장바구니 삭제 실패');
							}
						});
						function CartDeleteSuccess(list){
							
							var output = "";
							
							output += "<img src='/img/cartCheck.png' style='width: 100%;' id='"+list.muCode+"' class='cartChange' value='check1'></a>";
							
							var td22 = document.getElementById(muCode);
							console.log(td22);
							td22.innerHTML = output;
						}
						$(this).attr('src','/img/cartCheck.png');
						cartCheck = $(this).attr('value','check1');
					}
				}
				
			});
			function smallCart(list){
				var cartCountArea = document.getElementById('cartCountArea');
				
				if(list.length <= 0){
					cartCountArea.innerHTML = "";
				} else{
					cartCountArea.innerHTML = list.length;
				}
				
				var output = "";
				
				if(list.length > 4){
					output += "<a href='/cartList' class='header__all'>Go to cart</a>";
					for(var i=0; i<4; i++){
						output += "<div class='header__product'>";
						output += "<img src='muImage/"+list[i].muImage+"' style='width: 50px; height: 50px; border-radius: 70%; overflow: hidden;'>";
						output += "<p><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></p>";
						output += "<span>"+list[i].muSinger+"</span>";
						output += "<button id='"+list[i].muCode+"' class='cartDelete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></div>";
					}
				}else if(list.length == 0){
					output += "<div class='header__product' style='padding-left:33px; padding-right:33px;'>";
					output += "<span>장바구니가 비어있습니다.</span></div>"
				}else{
					output += "<a href='/cartList' class='header__all'>Go to cart</a>";
					for(var i in list){
						output += "<div class='header__product'>";
						output += "<img src='muImage/"+list[i].muImage+"' style='width: 50px; height: 50px; border-radius: 70%; overflow: hidden;'>";
						output += "<p><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span id='"+list[i].muCode+"' class='cartMusicName' value='"+list[i].muSinger+"' name='"+list[i].muName+"'>"+list[i].muName+"</span></a></p>";
						output += "<span>"+list[i].muSinger+"</span>";
						output += "<button id='"+list[i].muCode+"' class='cartDelete' type='button'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'></path></svg></button></div>";
					}
				}
				
				
				var smallCartListArea = document.getElementById('smallCartListArea');
				smallCartListArea.innerHTML = output;
				
				$(".cartDelete").click(function(){
					
					var muCode = $(this).attr('id');
					console.log("muCode : "+muCode);
					
					$.ajax({
						type : "POST",
						url : "cartListDelete",
						data : {"caMuCode" : muCode,
								"caMid" : sessionId
								},
						dataType : "json",
						success : function(list){
							smallCart(list);
							
							$.ajax({
								type : "POST",
								url : "MyMusicList",
								data : {"muSinger" : viewMid},
								dataType : "json",
								success : function(data){
									MyMusic(data);
								},
								error : function(){
									console.log("실패");
								}
							});
						},
						error : function(){
							alert('장바구니 삭제 실패');
						}
					});
				});
			}
		}
		
		function buy(list){
			var output = "";
			var output1 = "";
			var buyTheNumber = list.length;
			
			if(buyTheNumber <= 0){
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span>총 구매개수</span>";
			    output1 += "<p><b name='price' value='"+buyTheNumber+"' id='totalPrice'>"+buyTheNumber+"곡</b></p>";
			    output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z'/></svg>";
			    output1 += "</div></div>";
			    
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span>총 결제금액</span>";
			    output1 += "<p><b name='price' value='"+buyTheNumber * 500+"' id='totalPrice'>"+buyTheNumber * 500+"원</b></p>";
			    output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M6,11a1,1,0,1,0,1,1A1,1,0,0,0,6,11Zm12,0a1,1,0,1,0,1,1A1,1,0,0,0,18,11Zm2-6H4A3,3,0,0,0,1,8v8a3,3,0,0,0,3,3H20a3,3,0,0,0,3-3V8A3,3,0,0,0,20,5Zm1,11a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V8A1,1,0,0,1,4,7H20a1,1,0,0,1,1,1ZM12,9a3,3,0,1,0,3,3A3,3,0,0,0,12,9Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,12,13Z'/></svg>";
			    output1 += "</div></div>";
			    
				output += "<table id='buyListTable' class='cart__table'>";
				output += "<thead>"
				output += "<tr>";
				output += "<th>구매하신 음악이 없습니다.<br/><a href='/allfileList' class='hero__btn hero__btn--green'>음원목록으로</a></th>";
				output += "</tr>";
				output += "</thead>"
			}	else{
				output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span>총 구매개수</span>";
			    output1 += "<p><b name='price' value='"+buyTheNumber+"' id='totalPrice'>"+buyTheNumber+"곡</b></p>";
			    output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z'/></svg>";
			    output1 += "</div></div>";
			    
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span>총 결제금액</span>";
			    output1 += "<p><b name='price' value='"+buyTheNumber * 500+"' id='totalPrice'>"+buyTheNumber * 500+"원</b></p>";
			    output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M6,11a1,1,0,1,0,1,1A1,1,0,0,0,6,11Zm12,0a1,1,0,1,0,1,1A1,1,0,0,0,18,11Zm2-6H4A3,3,0,0,0,1,8v8a3,3,0,0,0,3,3H20a3,3,0,0,0,3-3V8A3,3,0,0,0,20,5Zm1,11a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V8A1,1,0,0,1,4,7H20a1,1,0,0,1,1,1ZM12,9a3,3,0,1,0,3,3A3,3,0,0,0,12,9Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,12,13Z'/></svg>";
			    output1 += "</div></div>";
			    
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span><button type='button' style='color:#25a56a;' class='allMusicDownload'>구매목록 모두받기</button></span>";
			    output1 += "</div></div>";
			    
				output += "<table id='buyListTable' class='main__table'>";
				output += "<thead>"
				output += "<tr>";
				output += "<th>결제번호</th>";
				output += "<th>프로필</th>";
				output += "<th>제목</th>";
				output += "<th>가수</th>";
				output += "<th>좋아요수</th>";
				output += "<th>조회수</th>";
				output += "<th>구매일시</th>";
				output += "<th>다운로드</th>";
				output += "</tr>";
				output += "</thead>"
			}
			
			for(var i in list){
				output += "<tbody>"
				output += "<tr>";
				output += "<td><div class='main__table-text main__table-text--number'><a class='open-modal'>"+list[i].pCode+"</a></div></td>";
				output += "<td><div class='main__table-img'><img src='/muImage/"+list[i].muImage+"'></div></td>";
				output += "<td><div class='main__table-text'><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span>"+list[i].muName+"</span></a></div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muSinger+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muLike+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muHit+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].pDate+"</div></td>";
				output += "<td><a href='/audio/"+list[i].mFile+"' download='"+list[i].mFile+"' class='single-item__export' id='"+list[i].muCode+"download'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Zm-9.71,1.71a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l4-4a1,1,0,0,0-1.42-1.42L13,12.59V3a1,1,0,0,0-2,0v9.59l-2.29-2.3a1,1,0,1,0-1.42,1.42Z'/></svg></a></td>";
				output += "</tr>";
				output += "</tbody>"
	
			}
			output += "</table>";
			
			var buyListArea = document.getElementById('buyListArea');
			buyListArea.innerHTML = output;
			
			var buyContentArea = document.getElementById('buyContentArea');
			buyContentArea.innerHTML = output1;
			
			$(".allMusicDownload").click(function(){
				for(var i in list){
					var UserName = list[i].mFile;
					var filepath = "/audio/"+list[i].mFile;
					download(UserName,filepath);
				}
				
				function download(filename, filepath) {
					var element = document.createElement('a');
					element.setAttribute('href',filepath);
					element.setAttribute('download', filename);
					document.body.appendChild(element);
					element.click();
					document.body.removeChild(element);
				}
			});
			
			$(".single-item__export").click(function(){
				
				var selectDownloadMusicCode = $(this).attr("id");
				console.log(selectDownloadMusicCode);
				console.log(sessionId);
				
				var selectMusicCode = selectDownloadMusicCode.replace("download","");
				console.log(selectMusicCode);
				
				$.ajax({
					type: "POST",
					url: "downloadTableInsert",
					data: {"mudMuCode": selectMusicCode,
						   "mudMid": sessionId},
					dataType: "json",
					success : function(list){
					},
					error : function(){
						console.log('다운로드 테이블 등록 실패');
					}
				});
			});
			
			$(".selectMusicDownload").click(function(){
				
				var selectDownloadMusicCode = $(this).attr("id");
				console.log(selectDownloadMusicCode);
				console.log(sessionId);
				
				var selectMusicCode = selectDownloadMusicCode.replace("download","");
				console.log(selectMusicCode);
				
				$.ajax({
					type: "POST",
					url: "downloadTableInsert",
					data: {"mudMuCode": selectMusicCode,
						   "mudMid": sessionId},
					dataType: "json",
					success : function(list){
					},
					error : function(){
						console.log('다운로드 테이블 등록 실패');
					}
				});
			});
		}
		
		function down(list){
			var output = "";
			var output1 = "";
			var downTheNumber = list.length;
			
			if(downTheNumber <= 0){
				output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
				output1 += "<span>다운목록</span>";
				output1 += "<p><b name='price' value='"+downTheNumber+"' id='totalPrice'>"+downTheNumber+"곡</b></p>";
				output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z'/></svg>";
				output1 += "</div></div>";
				
			    output += "<table id='downTable' class='cart__table'>";
				output += "<thead>"
				output += "<tr>";
				output += "<th>다운로드한 음악이 없습니다.<br/><a href='/allfileList' class='hero__btn hero__btn--green'>음원목록으로</a></th>";
				output += "</tr>";
				output += "</thead>";
			} else{
				output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
				output1 += "<span>다운목록</span>";
				output1 += "<p><b name='price' value='"+downTheNumber+"' id='totalPrice'>"+downTheNumber+"곡</b></p>";
				output1 += "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z'/></svg>";
				output1 += "</div></div>";
			    
			    output1 += "<div class='col-12 col-lg-6 col-xl-3'><div class='stats'>";
			    output1 += "<span><button type='button' style='color:#25a56a;' class='allMusicDownload'>전체목록 다시받기</button></span>";
			    output1 += "</div></div>";
				
			    output += "<table id='downTable' class='main__table'>";
				output += "<thead>"
				output += "<tr>";
				output += "<th>번호</th>";
				output += "<th>프로필</th>";
				output += "<th>제목</th>";
				output += "<th>가수</th>";
				output += "<th>좋아요수</th>";
				output += "<th>조회수</th>";
				output += "<th>구매일시</th>";
				output += "<th>다운일시</th>";
				output += "<th>다운로드</th>";
				output += "</tr>";
				output += "</thead>";
			}
			
			for(var i in list){
				output += "<tbody>"
				output += "<tr>";
				output += "<td><div class='main__table-text main__table-text--number'><a class='open-modal'>"+(parseInt(i)+1)+"</a></div></td>";
				output += "<td><div class='main__table-img'><img src='/muImage/"+list[i].muImage+"'></div></td>";
				output += "<td><div class='main__table-text'><a href='muView?muCode="+list[i].muCode+"&mId="+list[i].muSinger+"'><span>"+list[i].muName+"</span></a></div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muSinger+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muLike+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].muHit+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].pDate+"</div></td>";
				output += "<td><div class='main__table-text'>"+list[i].mudDate+"</div></td>";
				output += "<td><a href='/audio/"+list[i].mFile+"' download='"+list[i].mFile+"' class='single-item__export' id='"+list[i].muCode+"download'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Zm-9.71,1.71a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l4-4a1,1,0,0,0-1.42-1.42L13,12.59V3a1,1,0,0,0-2,0v9.59l-2.29-2.3a1,1,0,1,0-1.42,1.42Z'/></svg></a></td>";
				output += "</tr>";
				output += "</tbody>";
			}
			output += "</table>";
			
			var downListArea = document.getElementById('downListArea');
			downListArea.innerHTML = output;
			
			var downContentArea = document.getElementById('downContentArea');
			downContentArea.innerHTML = output1;
			
			$(".allMusicDownload").click(function(){
				for(var i in list){
					var UserName = list[i].mFile;
					var filepath = "/audio/"+list[i].mFile;
					download(UserName,filepath);
				}
				
				function download(filename, filepath) {
					var element = document.createElement('a');
					element.setAttribute('href',filepath);
					element.setAttribute('download', filename);
					document.body.appendChild(element);
					element.click();
					document.body.removeChild(element);
				}
			});
			
			$(".selectMusicDownload").click(function(){
				
				var selectDownloadMusicCode = $(this).attr("id");
				console.log(selectDownloadMusicCode);
				console.log(sessionId);
				
				var selectMusicCode = selectDownloadMusicCode.replace("download","");
				console.log(selectMusicCode);
				
				$.ajax({
					type: "POST",
					url: "downloadTableInsert",
					data: {"mudMuCode": selectMusicCode,
						   "mudMid": sessionId},
					dataType: "json",
					success : function(list){
					},
					error : function(){
						console.log('다운로드 테이블 등록 실패');
					}
				});
			});
		}
	});

	$("#subcheck").click(function() {
		   
		   var ssMid = sessionId;
		   var sserMid = $("#viewId").attr("value");
		   console.log('로그인 아이디 : ' + ssMid);
		   console.log('구독당한 아이디 : ' + sserMid);
		   
		   if($(this).attr('value') == "팔로우하기"){
		       $.ajax({
		            type: "POST",
		            url: "subreg",
		            data: {
		                "ssMid": ssMid ,
		                "sserMid": sserMid
		            },
		            dataType: "json",
		            success: function (subr) {
			            $("#subList").empty().append(subr);
			            $("#subcheck").attr('value','팔로우취소');
		            },
		            error: function () {
		                alert('파이팅!!');
		            }
		        }); 
		       $(this).attr('src','/icon/dislike.png');
		   }else{
		        $.ajax({
		            type: "POST",
		            url: "subcancel",
		            data: {
		                "ssMid": ssMid ,
		                "sserMid": sserMid
		            },
		            dataType: "json",
		            success: function (subr) {
			            $("#subList").empty().append(subr);
			            $("#subcheck").attr('value','팔로우하기');
		            },
		            error: function () {
		                alert('파이팅!!');
		            }
		        }); 
		        $(this).attr('src','/icon/like.png');
		   }
		});
	
		$("#subList").click(function(){
			  console.log("모달되냐?");
			  var sserMid = $("#viewId").attr("value");
			  $("#modal").fadeIn();
			  
			  console.log(sserMid);
			  $.ajax({
				  type : "POST",
				  url : "submodalList",
				  data : {"sserMid" : sserMid},
				  dataType: "json",
		          success: function (subr) {
		        	  
		        	var output = "";
		        	var output1 = "구독자";
		        	
		        	for(var i in subr){
		        		if(subr == ""){
		        			output += "<p>구독을 눌러보세요<p>"
		        		}else if(subr.length > 0){
		        			output += "<p><img src='/profile/"+ subr[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'> &nbsp;&nbsp;<a href='boardWriterView?boWriter="+ subr[i].mId +"&mId="+sessionId+"'>"+subr[i].mId+"</a></p>"
		        		}
		        	}
		        	const modalContent = document.getElementById("content");
					modalContent.innerHTML = output;
					
					var modalTitle = document.getElementById("modalTitle");
					modalTitle.innerHTML = output1;
					
					const modal = document.getElementById("modal")
					
					modal.style.display = "flex";
					
					const closeBtn = modal.querySelector(".close-area")
					closeBtn.addEventListener("click", e => {
						modal.style.display = "none"
					});	
					
					modal.addEventListener("click", e => {
					    const evTarget = e.target
					    if(evTarget.classList.contains("modal-overlay")) {
					        modal.style.display = "none"
					    }
					});
					
					window.addEventListener("keyup", e => {
					    if(modal.style.display === "flex" && e.key === "Escape") {
					        modal.style.display = "none"
					    }
					});
					
					console.log(subr);
		          },
		          error : function(){
		        	  alert('구독자 목록 불러오기 실패');
		          }
			  });
			  
		});
			  $("#suberList").click(function(){
				  console.log("모달되냐?");
				  var ssMid = $("#viewId").attr("value");
				  $("#modal").fadeIn();
				  
				  console.log(ssMid);
				  $.ajax({
					  type : "POST",
					  url : "subermodalList",
					  data : {"ssMid" : ssMid},
					  dataType: "json",
			          success: function (subr) {
			        	  
			        	var output = "";
			        	var output1 = "구독한 목록";
			        	for(var i in subr){
			        		if(subr == ""){
			        			output += "<p>구독한 사람이 없습니다.<p>"
			        		}else if(subr.length > 0){
			        			output += "<p><img src='/profile/"+ subr[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'> &nbsp;&nbsp;<a href='boardWriterView?boWriter="+ subr[i].mId +"&mId="+sessionId+"'>"+subr[i].mId+"</a></p>"
			        		}
			        	}
			        	const modalContent = document.getElementById("content");
						modalContent.innerHTML = output;
						
						var modalTitle = document.getElementById("modalTitle");
						modalTitle.innerHTML = output1;
						
						const modal = document.getElementById("modal")
						
						modal.style.display = "flex";
						
						const closeBtn = modal.querySelector(".close-area")
						closeBtn.addEventListener("click", e => {
							modal.style.display = "none"
						});	
						
						modal.addEventListener("click", e => {
						    const evTarget = e.target
						    if(evTarget.classList.contains("modal-overlay")) {
						        modal.style.display = "none"
						    }
						});
						
						window.addEventListener("keyup", e => {
						    if(modal.style.display === "flex" && e.key === "Escape") {
						        modal.style.display = "none"
						    }
						});
						
						console.log(subr);
			          },
			          error : function(){
			        	  alert('구독자 목록 불러오기 실패');
			          }
				  });
		});
	
	$("#modal_close_btn").click(function () {
	    $("#modal").fadeOut();
	});

	function modify(){
		alert("정보가 수정되었습니다")
	}
	
	$(".dashbox__refresh").click(function(){
		location.reload();
	});

</script>

</html>